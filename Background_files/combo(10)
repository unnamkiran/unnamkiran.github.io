YUI.add("hermes-lang-search",function(e,t){e.Intl.add("hermes/search","en-US",{RELEVANT:["Relevant"],RECENT:["Recent"],INTERESTING:["Interesting"],NAME:["Name"],ACTIVITY:["Activity"],SIZE:["Size"],OLDEST:["Oldest"],NEWEST:["Newest"],DEFAULT_SEARCH:['This is where you search Flickr. Here\'s a search for <span class="default-search">',"${query}","</span> to get you started!"],FLICKR_SEARCH:["Flickr Search"],NO_MATCHES_FOR_QUERY_TERM:["Oops! There are no matches for \u201c","${searchTerm}","\u201d."],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:["Oops! There are no matches for \u201c","${searchTerm}","\u201d with your selected settings."],NO_MATCHES_FOR_QUERY:["Oops! There are no matches for your search."],TRY_DIFFERENT:["Please try refining your search."],TRY_DIFFERENT_BROADER:["Please try broadening your search."],SEARCH_ERROR:["Oops! The date you entered does not exist."],SEARCH_START:["Start your search"],SEARCHING:["Searching"],FETCHING_PHOTOS:["Fetching more photos..."],SEARCH:["Search"],START_YOUR_SEARCH:["Start your search"],BY_USER:["by ","${user}"],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:["Oops! There are no matches for \u201c","${searchTerm}","\u201d in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:["Oops! There are no matches for \u201c","${searchTerm}","\u201d in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:["Oops! There are no matches for \u201c","${searchTerm}","\u201d in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:["Oops! There are no matches for \u201c","${searchTerm}","\u201d in this group."],NO_MATCHES_FOR_QUERY_TERM_YOUR:["Oops! There are no matches for your search in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:["Oops! There are no matches for your search in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_USER:["Oops! There are no matches for your search in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_GROUP:["Oops! There are no matches for your search in this group."],API_ERROR_HEADER:["Oh noes! We couldn't process your search."],API_ERROR_SUBHEADER:["Please change it up a bit and try again."],PEOPLE_YOU_FOLLOW:["People you follow"],ALL_FLICKR_MEMBERS:["All Flickr members"],FLICKR_MEMBERS:["Flickr members"],YOUR_GROUPS:["Your groups"],ALL_FLICKR_GROUPS:["All Flickr groups"],FLICKR_GROUPS:["Flickr groups"],MEMBER_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 members",one:"${#} member",other:"${#} members"}}],GROUP_PHOTO_COUNT:[{type:"plural",valueName:"count",options:{zero:"no photos",one:"${#} photo",other:"${#} photos"}}],GROUP_DISCUSSION_COUNT:[{type:"plural",valueName:"count",options:{zero:"no discussions",one:"${#} discussion",other:"${#} discussions"}}],YOUR_PHOTOS:["Your photos"],YOUR_ALBUMS:["Your albums"],YOUR_GALLERIES:["Your galleries"],FROM_YOUR_CONTACTS:["From your contacts"],EVERYONES_PHOTOS:["Everyone's photos"],VIEW_ALL_COUNT:[{type:"plural",valueName:"count",options:{zero:"no more photos",other:"View all ${#}"}}],RESULTS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no results",one:"${#} result",other:"${#} results"}}],PEOPLE_PHOTOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}],PEOPLE_VIDEOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no videos",one:"${#} video",other:"${#} videos"}}],PEOPLE_FOLLOWERS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no followers",one:"${#} follower",other:"${#} followers"}}],SAFESEARCH_ON:["SafeSearch on"],SAFESEARCH_OFF:["SafeSearch off"],SAFESEARCH_MODERATE:["SafeSearch moderate"],SEARCH_PHOTOSTREAM:["Search photostream"],SEARCH_FAVORITES:["Search favorites"],ANY_LICENSE:["Any license"],ALL_CC:["All creative commons"],COMMERCIAL_USE:["Commercial use allowed"],MODS_ALLOWED:["Modifications allowed"],COMMERCIAL_USE_MODS:["Commercial use & mods allowed"],NO_RESTRICTIONS:["No known copyright restrictions"],MARKETPLACE_LICENSE:["Flickr Marketplace"],US_GOVT:["U.S. Government works"],PUBLIC_DOMAIN_DEDICATION:["Public Domain Dedication (CC0)"],PUBLIC_DOMAIN_WORK:["Public Domain Work"],CC_BY_NC_SA:["Attribution-NonCommercial-ShareAlike"],CC_BY_NC:["Attribution-NonCommercial"],CC_BY_NC_ND:["Attribution-NonCommercial-NoDerivs"],CC_BY:["Attribution"],CC_BY_SA:["Attribution-ShareAlike"],CC_BY_ND:["Attribution-NoDerivs"],PLAIN_COUNT:[{type:"plural",valueName:"count",options:{zero:"0",one:"${#}",other:"${#}"}}],PHOTOS:["Photos"],PEOPLE:["People"],GROUPS:["Groups"],PHOTOS_POSSESSIVE:["${name}","'s photos"],FAVES_POSSESSIVE:["${name}","'s favorites"],CONTACTS_POSSESSIVE:["${name}","'s contacts"],GROUPS_POSSESSIVE:["${name}","'s groups"],VIEWER_FAVES:["Your favorites"],IN_GROUP_POOL:["In the ","${name}"," group pool"],OPT_OUT_MESSAGE:["You are viewing the alpha version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE:["Go back to the alpha search experience"],OPT_OUT_MESSAGE_BETA:["You are viewing the beta version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE_BETA:["Go back to the beta search experience"],SEARCH_BETA_LABEL:["Search beta"],SEARCH_ALPHA_LABEL:["Search alpha"],GO_BACK_TO_OLD_SEARCH:["Go back to the old Flickr search"],PROVIDE_FEEDBACK:["Provide feedback"],FROM_PEOPLE_YOU_FOLLOW:["From people you follow"],FULL_TEXT_AND_TAGS:["Full text with suggested tags"],FULL_TEXT:["Full text"],TAGS_ONLY:["Tags only"],RED:["Red"],DARK_ORANGE:["Dark orange"],ORANGE:["Orange"],SCHOOL_BUS_YELLOW:["School bus yellow"],LEMON_YELLOW:["Lemon yellow"],GREEN:["Green"],LIME_GREEN:["Dark lime green"],CYAN:["Cyan"],BLUE:["Blue"],VIOLET:["Violet"],PINK:["Pink"],PALE_PINK:["Pale pink"],WHITE:["White"],GRAY:["Gray"],BLACK:["Black"],MONOCHROME:["monochrome"],JOINED_DATE:["Joined ",{type:"date",valueName:"intlDate",format:"monthYearShort"}],HIDE_INACTIVE_GROUPS:["Hide inactive groups"],ADVANCED:["Advanced"],ORIENTATION_AND_SIZE:["Orientation & size"],ORIENTATION:["Orientation"],MINIMUM_SIZE:["Minimum size"],PORTRAIT:["Portrait"]
,SQUARE:["Square"],LANDSCAPE:["Landscape"],PANORAMA:["Panorama"],SMALL_SHOW_ALL_SIZES:["Small (show all sizes)"],ALL_SIZES:["All sizes"],MEDIUM:["Medium"],LARGE:["Large"],CUSTOM:["Custom"],COLOR:["Color"],DATE:["Date"],FROM:["From"],TO:["To"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],CONTENT:["Content"],VIDEOS:["Videos"],SCREENSHOTS:["Screenshots"],ILLUSTRATIONS:["Illustrations"],SEARCH_IN:["Search in"],RESET:["Reset"],JUSTIFIED_VIEW:["Justified view"],THUMBNAIL_VIEW:["Thumbnail view"],TILE_VIEW:["Tile view"],SORT:["Sort"],TOGGLE_ADVANCED:["Toggle advanced"],CAMERA_SETTINGS:["Camera settings"],TOGGLE_SEARCH:["Toggle Search"],PHOTOS_PEOPLE_OR_GROUPS:["Photos, people, or groups"],PHOTOS_PEOPLE_GROUPS:["Photos, people, groups"],SMALL_SHORT:["S"],MEDIUM_SHORT:["M"],LARGE_SHORT:["L"],ALL:["All"],TAGS:["Tags"],CLEAR:["Clear"],ABSTRACT:["Abstract"],ART:["Art"],BLACK_AND_WHITE:["Black and white"],MONOCHROME_STYLE:["Monochrome"],BLUR:["Blur"],BRIGHT:["Bright"],CURVES:["Curves"],DIAGONAL:["Diagonal"],ETHEREAL:["Ethereal"],GEOMETRIC:["Geometric"],HDR:["HDR"],LINES:["Lines"],MACRO:["Macro"],DEPTH_OF_FIELD:["Shallow depth of field"],MINIMALIST:["Minimalist"],PASTEL:["Pastel"],PATTERNS:["Patterns"],ROUND:["Round"],SERENE:["Serene"],SYMMETRY:["Symmetry"],TEXTURES:["Textures"],TRIANGLES:["Triangles"],VINTAGE:["Vintage"],BOKEH:["Bokeh"],SEARCH_PHOTOS:["Search photos"],SEARCH_PEOPLE:["Search people"],SEARCH_GROUPS:["Search groups"],EVERYONE:["Everyone"],SIGN_IN_BEFORE_SEARCH_TITLE:["This content is for mature audiences only."],SIGN_IN_BEFORE_SEARCH_MESSAGE:["Join Flickr to turn off safe search."],SIGNUP_FOOTER_MESSAGE:["Private photo management and an inspiring community."]})},"@VERSION@",{requires:["intl"]});
YUI.add("search-autosuggest-field-view",function(e){var t=150;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=this.appContext.getLocation();return this.set("searchUrl",new e.SearchUrl(n.href,this.appContext)),this.set("siteSection",e.URLHelper.getSiteSectionByURL(n.pathname)),this.appContext.flipper.isFlipped("enable-search-pills")&&this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"})}),this.enableMobileNav=t.enableMobileNav,this.isSOHP=t.isSOHP,this},subviewConfig:{"search-autosuggest-items-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.enableMobileNav||this.appContext.getUA().isMobileOrTablet}}},loadState:function(){var t;return this.enableMobileNav?e.Promise.resolve():(t=[this.getContextModelPromise()],e.Promise.all(t))},additionalViewClasses:function(){var e=[];return e},buildContainer:function(){var e=this.get("context"),t=this.get("searchUrl").getSearchTerm(),n=[];return e&&e.type&&n.push({combo:!0,name:e.name,secondName:this.get("contextToString")[e.scope]}),this.setContainerWithTemplate("search-autosuggest-field",{searchTerm:t,pills:n,hasPills:n.length>0}),!this.appContext.getViewer().signedIn&&this.isSOHP&&this.get("container").addClass("optimized-autosuggest-field-wide"),(n.length>0||t.length>0)&&this.get("container").addClass("expanded"),this},activate:function(){var t=this.get("container"),n=t.one("#search-field"),r=t.one(".search-form");this.appContext.getViewer().signedIn||(t.ancestor(".sohp-view")||t.ancestor(".sohp-slideshow-view")?(t.addClass("optimized-autosuggest-field-wide"),r&&r.addClass("optimized-search-form-wide")):(t.removeClass("optimized-autosuggest-field-wide"),r&&r.removeClass("optimized-search-form-wide"))),this.appContext.getViewer().prefs&&this.appContext.getViewer().prefs.keyboardShortcutsEnabled&&this.attachKeyEvent("up:83",this.focusSearchField.bind(this)),t.one("form")&&this.registerEventHandler(t.one("form").on("submit",this.executeSearch.bind(this))),this.appContext.flipper.isFlipped("enable-search-pills")&&this.registerEventHandler(e.on("add-context-to-search-field",this.addContext.bind(this))),this.appContext.flipper.isFlipped("enable-empty-search-text-transfer")&&this.registerEventHandler(e.on("transfer-to-gn-search",this.addSearchText.bind(this))),this.registerEventHandler(t.on("mousedown",this.handleMouseDown.bind(this))),this.registerEventHandler(n.on({valuechange:this.updateAutosuggestItems.bind(this),focus:this.handleSearchFieldFocus.bind(this),blur:this.handleSearchFieldBlur.bind(this)})),this.registerEventHandler(n.on("key",this.handleSearchFieldKeydown.bind(this),"down:27,38,40,8"));try{e.config.doc.activeElement.isEqualNode(n.getDOMNode())&&(this.blurSearchField(),this.focusSearchField())}catch(i){}return this},getContextModelPromise:function(){var t=this.get("searchUrl").getAPIParams(),n=e.Promise.resolve(),r=null,i=this;return this.appContext.flipper.isFlipped("enable-search-pills")&&(t[e.SearchHelper.API.groupId]?(r={type:"group",id:t[e.SearchHelper.API.groupId],scope:"photos"},n=this.appContext.getModel("group-info-models",r.id)):t[e.SearchHelper.API.userId]?(r={type:"user",id:t[e.SearchHelper.API.userId],scope:t[e.SearchHelper.API.faves]?"favorites":"photostream"},t[e.SearchHelper.API.faves]?r.scope="favorites":t[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]?r.scope="albums":r.scope="photostream",n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.faves]?(r={type:"user",id:this.appContext.getViewer().nsid,scope:"favorites"},n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.contacts]?r={type:"contacts",scope:"photos",name:this.get("contextToString").contacts}:t[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(r={type:"everyone",scope:"photos",name:this.get("contextToString").everyone})),n.then(function(e){e&&(r.name=r.type==="user"?e.getValue("displayname"):e.getValue("group").getValue("title")),i.set("context",r)})},handleMouseDown:function(e){var t=e.target;if(e.which===1)if(t.hasClass("search-pill-remover"))e.halt(),this.removeContext();else if(t.hasClass("search-icon-button"))e.halt(),this.executeSearch(e);else if(t.hasClass("search-pill")||t.hasClass("search-pillbox")||t.hasClass("search-form"))e.halt(),this.focusSearchField()},addSearchText:function(e){var t=this.get("container").one("#search-field");t.set("value",t.get("value")+e),this.focusSearchField()},addPill:function(t,n){var r,i={name:t};n&&(i.combo=!0,i.secondName=n),r=e.Node.create(this.templates("search-pill")(i)),this.get("container").one(".search-pillbox").appendChild(r)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},addContext:function(t){var n=this.get("context");if(!n||n.id!==t.id||n.name!==t.name||n.type!==t.type||n.scope!==t.scope)n&&n.type?(this.removeContext(),this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope])):(this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope]));this.fire("parentViewEvent","disable-autosuggest"),this.get("container").one("#search-field").set("placeholder",""),this.focusSearchField(),e.rapidTracker.beacon(this.name,"searchAddContext_"+t.type+"_"+t.scope)},removeContext:function(){var t=this.get("container"),n=t.one("#search-field");this.set("context",null),n.set("placeholder",this.intlMessage({intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"})),this.removePills(),this.blurSearchBar
(),e.fire("remove-context-in-search-field",{}),e.rapidTracker.beacon(this.name,"searchRemoveContext");if(this.get("siteSection")&&this.get("siteSection").name==="search"&&n.get("value").length>0){this.executeSearch();return}this.updateAutosuggestItems(),t.hasClass("expanded")&&(this.fire("parentViewEvent","enable-autosuggest"),this.firstAutosuggestView||(e.rapidTracker.beacon(this.name,"autosuggestShow"),this.firstAutosuggestView=!0))},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"resize-search-field":this.resizeSearchField(t[1]);break;case"focus-search-field":this.focusSearchField();break;case"clear-search-field":this.clearSearchField()}},onSubviewEvent:function(e,t){var n=t&&t.length&&t[0],r=this.get("container"),i,s;switch(n){case"autosuggest-lost-all-focus":this.handleAutosuggestBlur();break;case"focus-search-field":this.focusSearchField();break;case"autosuggest-no-items":r.removeClass("autosuggest-active");break;case"autosuggest-has-items":r.addClass("autosuggest-active");break;case"autosuggest-update-field":s=r.one("#search-field"),s&&typeof t[1]=="string"&&s.set("value",t[1]);break;case"backspace-focus":s=r.one("#search-field"),s&&(i=s.get("value"),s.set("value",i.substring(0,i.length-1)),this.focusSearchField())}},executeSearch:function(t){var n,r,i,s={};t&&t.halt(),n=this.get("container").one("#search-field").get("value"),i=this.get("context"),i&&i.type?(i.type==="group"&&i.scope==="discussions"?(s.q=n,s.w=i.id,s.m="discuss",r=new e.SearchUrl(s,this.appContext,e.SearchUrl.searchTypes.CLASSIC_GROUPS)):(i.type==="user"?(s[e.SearchHelper.API.userId]=i.id,i.scope==="favorites"?s[e.SearchHelper.API.faves]=1:i.scope==="albums"?s[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]=1:s[e.SearchHelper.API.userId]=i.id):i.type==="group"?s[e.SearchHelper.API.groupId]=i.id:i.type==="contacts"?s[e.SearchHelper.API.contacts]="all":i.type==="everyone",s[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]=1,r=this.get("searchUrl"),Object.keys(s).forEach(function(e){r.setAPIParam(e,s[e])}),r.setSearchType(e.SearchUrl.searchTypes.PHOTOS),r.setSearchTerm(n)),e.rapidTracker.beacon(this.name,"searchWithContext_"+i.type+"_"+i.scope)):(r=this.get("searchUrl"),r.createNewSearch(n)),this.appContext.flapp.navigate(r.getURL())},focusSearchField:function(t){e.OverlayManager.DroparoundOverlay.closeAll(),this.get("container").one("#search-field").focus()},blurSearchField:function(e){this.get("container").one("#search-field").blur()},resizeSearchField:function(e){e?(this.get("container").setStyle("width",e+"px"),this.get("container").one("#search-field").setStyle("width",e+"px")):(this.get("container").removeAttribute("style"),this.get("container").one("#search-field").removeAttribute("style"))},clearSearchField:function(e){this.get("container").one("#search-field").set("value","")},updateAutosuggestItems:function(e){var t=this.get("container"),n=t.one("#search-field").get("value");e&&e.halt();if(this.get("context"))return;this.fire("parentViewEvent","update-autosuggest-items",n)},handleSearchFieldFocus:function(t){var n=this.get("container"),r=n.one(".search-form"),i,s=this;t.halt(),n.hasClass("focus")||(n.addClass("focus"),n.addClass("expanded"),this.expandTimer&&clearTimeout(this.expandTimer),this.get("context")||(i=this.registerEventHandler(r.on("transitionend",function(){s.detachRegisteredEvent(i),s.updateAutosuggestItems(),n.hasClass("expanded")&&(s.fire("parentViewEvent","enable-autosuggest"),s.firstAutosuggestView||(e.rapidTracker.beacon(s.name,"autosuggestShow"),s.firstAutosuggestView=!0))}))))},blurSearchBar:function(){clearTimeout(this.expandTimer),this.expandTimer=setTimeout(function(){var t=this.get("container"),n=this.get("context"),r=e.one(e.config.doc.activeElement);r.hasClass("autosuggest-selectable-item")||(t.removeClass("focus"),t.removeClass("autosuggest-active"),(!n||!n.type)&&t.one("#search-field").get("value").length===0&&t.removeClass("expanded"),this.fire("parentViewEvent","disable-autosuggest"))}.bind(this),t)},handleSearchFieldBlur:function(e){e.halt(),e.relatedTarget&&e.relatedTarget.hasClass("search-icon-button")?this.executeSearch():this.blurSearchBar()},handleAutosuggestBlur:function(){this.blurSearchBar()},handleSearchFieldKeydown:function(t){var n=t.keyCode,r=t.target;switch(n){case 27:t.halt(),this.blurSearchField();break;case 38:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","up");break;case 40:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","down");break;case 8:e.fluid.getTextFieldCursorPosition(r)===0&&e.fluid.getTextFieldSelection()===""&&this.removeContext()}},destructor:function(){clearTimeout(this.expandTimer),this.expandTimer=null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-field","hermes-template-search-pill","search-url","autosuggest-context-results-models","storage-helper","search-autosuggest-items-list-view","url-helper"],optionalRequires:["fluid"],langBundles:["search","common","groups"]});
YUI.add("hermes-template-autosuggest-bar",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div id="autosuggest">\n	<div class="search-icon"></div>\n	<form action="/search/" method="get" role="search">\n		<input type="text" name="q" value="'+e.escapeExpression((s=(s=n.searchTerm||(t!=null?t.searchTerm:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"searchTerm",hash:{},data:i}):s))+'" id="autosuggest-input" class="yui3-aclist-input" autocomplete="off" aria-label="Search" role="textbox">\n	</form>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-autosuggest-item",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return' style="background-image: url('+e.escapeExpression((s=(s=n.icon||(t!=null?t.icon:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"icon",hash:{},data:i}):s))+');"'},3:function(e,t,n,r,i){return"<i></i>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="autosuggest-item" data-type="'+l((o=(o=n.type||(t!=null?t.type:t))!=null?o:a,typeof o===f?o.call(u,{name:"type",hash:{},data:i}):o))+'" data-section="'+l((o=(o=n.section||(t!=null?t.section:t))!=null?o:a,typeof o===f?o.call(u,{name:"section",hash:{},data:i}):o))+'" data-destination="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'">\n	<div class="autosuggest-icon"'+((s=n["if"].call(u,t!=null?t.icon:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+">\n		"+((s=n.unless.call(u,t!=null?t.icon:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	</div>\n	<div class="autosuggest-text">\n		<div>'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+"</div><span>"+l((o=(o=n.subtitle||(t!=null?t.subtitle:t))!=null?o:a,typeof o===f?o.call(u,{name:"subtitle",hash:{},data:i}):o))+"</span>\n	</div>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("autosuggest-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("autosuggest-view",e.FlickrView,[],{langBundles:this.details.langBundles,START_MATCH_MULTIPLIER:2,MATCH_THRESHOLD:0,MAX_RESULTS_TO_DISPLAY:9,MATCH_DISTANCE_THRESHOLD:.2,MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD:4,COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD:3,initializer:function(e){var t=this.appContext.getViewer();return e.contextWeights?this.contextWeights=e.contextWeights:(this.contextWeights={global_global:{tags:1,people:1,groups:1}},t.signedIn&&(this.contextWeights[t.nsid+"_user"]={people:1,groups:1})),this.searchId=e.searchId,e.defaultSearchScope?this.defaultSearchScope=e.defaultSearchScope:this.searchId?this.defaultSearchScope=null:this.defaultSearchScope={},this.inputNode=null,this.resultItems=[],this},loadState:function(){var t=this;return this.searchId?this.appContext.getModel("search-photos-models",this.searchId).then(function(e){t.searchModel=e}):e.Promise.resolve()},buildContainer:function(){var t,n;return this.searchModel?(n=this.searchModel.getValue("apiParams"),t=n.text||n.tags||""):t="",this.setContainerWithTemplate("autosuggest-bar",{searchTerm:e.flutil.unescape(t)}),this},activate:function(){var t=this;return this.getContextModels().then(function(){t.determineContext(),t.defaultSearchScope||(t.defaultSearchScope=t.getSearchScope(t.searchModel.getValue("apiParams"))),t.buildSearchItems()}),this.autoCompleteList=e.use("autocomplete",function(e){t.inputNode=e.one("#autosuggest-input"),t.inputNode.plug(e.Plugin.AutoComplete,{minQueryLength:0,activateFirstItem:t.hasDefaultSearchItem,source:function(){return t.resultItems.concat(t.searchItems)},resultFilters:function(e,n){var r,i,s=0,o=0,u={},a,f,l,c;r=t.buildTokenRegExps(e),i=n.filter(function(n){var i,s,o=n.raw.type===1||e.length<t.MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD,a=e.length<t.COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD;return n.raw.isSearchItem?!0:(i=n.raw.matches.reduce(function(e,n){return e+n.weight*t.maxMatch(r,n.token,o,a)},0),n.matchScore=i/n.raw.matches.length,s=e.length?i>t.MATCH_THRESHOLD:!0,s&&(u[n.raw.type]=u[n.raw.type]||0,u[n.raw.type]++),s)});for(f=0,l=t.searchItems.length;f<l;f++)c=t.searchItems[f].resultType,u[c]?t.searchItems[f].section=t.searchItems[f].startSection:t.searchItems[f].section=t.searchItems[f].endSection;return i=i.sort(function(e,n){var r=e.raw.section-n.raw.section,i;if(r===0)return e.raw.isSearchItem?-1:n.raw.isSearchItem?1:(i=n.matchScore-e.matchScore,Math.abs(i)<t.MATCH_DISTANCE_THRESHOLD?n.raw.score-e.raw.score:i);return r}),a=t.allocateTypeCounts(u,t.MAX_RESULTS_TO_DISPLAY),i=i.filter(function(e){return e.raw.isSearchItem?!0:(e.raw.type===o?s++:(o=e.raw.type,s=1),s<=a[o])}),i},resultFormatter:function(e,n){return n.map(function(e){var n;return e.raw.type===2?e.raw.members===1?n=t.intlMessage({intlName:"autosuggest.MEMBER"}):n=t.intlMessage({intlName:"autosuggest.MEMBERS",count:e.raw.members}):n=e.raw.subtitle||"",t.templates("autosuggest-item")({title:e.raw.title,subtitle:n,type:["tag","people","group","button-people","button-group"][e.raw.type],section:e.raw.section,icon:e.raw.type===0||e.raw.isSearchItem?"":t.buildIconURL(e.raw)})})},resultTextLocator:function(e){return e.isSearchItem?t.get("container").one("#autosuggest-input").get("value"):e.title}}),t.registerEventHandler(t.inputNode.on("focus",function(){e.rapidTracker.beacon(t.name,"autosuggestInputFocus"),t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.registerEventHandler(t.inputNode.on("click",function(){t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.inputNode.ac.after("query",function(){var e=t.get("container").one(".autosuggest-item");t.get("container").all(".autosuggest-item").each(function(t){var n;e.getAttribute("data-section")!==t.getAttribute("data-section")&&e.get("parentNode").addClass("separator"),e=t,n=t.getAttribute("data-type"),(n==="tag"||n==="button-group"||n==="button-people")&&t.get("parentNode").setAttribute("data-is-short","true")})}),t.inputNode.ac.on("select",function(e){var n=t.itemSelected(e.result);e.originEvent.stopImmediatePropagation(),n||(t.inputNode.focus(),e.halt())}),t.registerEventHandler(t.inputNode.on("keydown",function(n){var r=t.inputNode.get("value");n.keyCode===13&&(n.halt(),r&&(e.rapidTracker.beacon(t.name,"autosuggestEnterKeydown"),t.close(),t.itemSelected(r)))})),t.registerEventHandler(t.get("container").one(".search-icon").on("click",function(n){var r=t.inputNode.get("value");r&&(e.rapidTracker.beacon(t.name,"autosuggestSearchIconClick"),t.itemSelected(r))}))}),this},close:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.hide()},itemSelected:function(t){var n,r,i,s=this.searchModel&&e.merge(this.searchModel.getValue("apiParams"))||{};if(typeof t=="string"||!t.raw.isSearchItem&&t.raw.type===0)r="/search?",delete s.text,delete s.tags,typeof t=="string"?s.text=t:(s.text=t.raw.title,e.rapidTracker.beacon(this.name,"autosuggestSuggestedPhotoSearchSelect")),s=e.merge(this.clearParamsExceptSearchScope(s),this.defaultSearchScope);else{if(!t.raw.isSearchItem)return s={},t.raw.pathalias?n=t.raw.pathalias:n=t.raw.nsid,t.raw.type===1?(r="/photos/"+n,e.rapidTracker.beacon(this.name,"autosuggestPersonSelect")):t.raw.type===2&&(r="/groups/"+n,e.rapidTracker.beacon(this.name,"autosuggestGroupSelect")),this.classicNavigate(r),!0;i=this.get("container").one("#autosuggest-input").get("value");if(!i)return e.rapidTracker.beacon(this.name,"autosuggestSearchButtonItemSelectEmpty"),!1;if(t.raw.searchScope==="people")return e.rapidTracker.beacon(this.name,"autosuggestPeopleSearchItemSelect"),r="/search/people/?",s={q:i},this.classicNavigate(r+e.QueryString.stringify(s)),!0;if(t.raw.searchScope==="groups")return e.rapidTracker.beacon(this.name,"autosuggestGroupsSearchItemSelect"),r="/search/groups/?",s={q:i},this.classicNavigate
(r+e.QueryString.stringify(s)),!0;t.raw.isDefault?e.rapidTracker.beacon(this.name,"autosuggestDefaultPhotoSearchItemSelect"):e.rapidTracker.beacon(this.name,"autosuggestOtherPhotoSearchItemSelect"),r="/search?",s.text=i,s=this.clearParamsExceptSearchScope(s),s=e.merge(s,t.raw.searchScope)}return e.SearchHelper.clearAdvancedSearchParams(s),this.appContext.flapp.navigate(r+e.QueryString.stringify(s)),!0},determineContext:function(){var e={},t=this.appContext.getViewer();this.searchModel?(e.global_global={people:1,groups:1},t.signedIn&&(e[t.nsid+"_user"]={people:1,groups:1}),this.groupInfo?e[this.groupInfo.nsid+"_group"]={tags:1,people:1,groups:1}:this.personInfo?e[this.personInfo.nsid+"_user"]={tags:1,people:1,groups:1}:(t.signedIn&&(e[t.nsid+"_user"]={tags:1,people:1,groups:1}),e.global_global={tags:1,people:1,groups:1})):e=this.contextWeights,this.setWeights(e)},clearParamsExceptSearchScope:function(e){return delete e.user_id,delete e.group_id,delete e.contacts,delete e.faves,e},getSearchScope:function(e){var t=["user_id","group_id","contacts","faves"],n,r,i={};for(n=0,r=t.length;n<r;n++)e[t[n]]&&(i[t[n]]=e[t[n]]);return i},buildSearchItems:function(){this.searchItems=[{type:3,title:this.intlMessage({intlName:"autosuggest.SEARCH_PEOPLE"}),searchScope:"people",isSearchItem:!0,resultType:1,startSection:1,endSection:3},{type:4,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUPS"}),searchScope:"groups",isSearchItem:!0,resultType:2,startSection:2,endSection:4}],this.sectionMap={0:"0",1:"1",2:"2"}},getContextModels:function(){var n=this,r,i,s=null,o=null;return this.searchModel?(r=this.searchModel.getValue("apiParams"),r.group_id?(i={},t.nsid(r.group_id)?i.id=r.group_id:i.pathAlias=r.group_id,s=n.appContext.getModel("group-pool-models",i)):s=e.Promise.resolve(),r.user_id?(i={},t.nsid(r.user_id)?i.id=r.user_id:i.pathAlias=r.user_id,o=n.appContext.getModel("person-models",i)):o=e.Promise.resolve(),e.Promise.all([s,o]).then(function(e){e[0]&&(n.groupInfo={name:e[0].getValue("group").getValue("title"),nsid:e[0].id}),e[1]&&(n.personInfo={name:e[1].getValue("displayname"),nsid:e[1].getValue("nsid")})})):e.Promise.resolve()},classicNavigate:function(t){window.location=e.url(t)},buildIconURL:function(t){return e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver)},buildTokenRegExps:function(t){var n=[],r,i,s,o,u=t.split(" ").map(e.Text.AccentFold.fold.bind(e.Text.AccentFold));for(r=0,i=u.length;r<i;r++)s=u[r],s&&(o=this.escapeForRegExp(s),n.push({re:new RegExp(o,"i"),numChars:s.length}));return n},escapeForRegExp:function(e){return e=decodeURIComponent(e),e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?").replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")},maxMatch:function(e,t,n,r,i){var s=this,o=t.length,u;return u=e.map(function(e){var r=t.match(e.re),u=0,a;return r&&(a=r.index===0,i?u=1:u=e.numChars/o,n&&!a&&(u=0),a&&(u*=s.START_MATCH_MULTIPLIER)),u}),u.length?Math.max.apply(Math,u):0},allocateTypeCounts:function(e,t){var n=Object.keys(e),r=n.length,i={},s,o=n.reduce(function(t,n){return t+e[n]},0),u=0,a,f;t=Math.min(t,o),s=Math.floor(t/n.length);for(a=0;a<r;a++)f=n[a],s<=e[f]?i[f]=s:i[f]=e[f],u+=i[f];if(u===t)return i;a=0;while(u<t)a%=r,f=n[a],e[f]>i[f]&&(i[f]++,u++),a++;return i},setWeights:function(e){var t=this,n,r=[];this.contextWeights=e;for(n in this.contextWeights)this.appContext.getModel("autosuggest-context-results-models",n).then(function(e){r.push(e),t.computeResultItems(r),t.inputNode&&t.inputNode.ac&&t.inputNode.test(":focus")&&t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})},computeResultItems:function(t){var n=this,r={},i=[],s,o,u,a,f;for(s=0,o=t.length;s<o;s++)u=t[s],a=this.contextWeights[u.id],["tags","people","groups"].forEach(function(t){var i=u.getValue(t),s=a[t],o,f,l;if(!s)return;for(o=0,f=i.length;o<f;o++)l=i[o],r[l.key]||(r[l.key]=e.merge(l),r[l.key].score=0),r[l.key].score+=l.score*s,r[l.key].section=n.sectionMap[l.type]});for(f in r)i.push(r[f]);return this.resultItems=i,i},destructor:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.destroy(!0)}})},"@VERSION@",{requires:["flickr-promise","flickr-view","flutil","url","text-accentfold","url-helper","autosuggest-context-results-models","hermes-template-autosuggest-bar","hermes-template-autosuggest-item"],langBundles:["autosuggest"]});
YUI.add("hermes-template-notifications-menu",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n.unseenNotificationCount||(t!=null?t.unseenNotificationCount:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"unseenNotificationCount",hash:{},data:i}):s))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<a class="gn-title c-notifications-menu"\n	tabindex="0"\n	aria-haspopup="true"\n	aria-expanded="false"\n	aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'">\n	<span class="c-notification-icon" aria-hidden="true">\n		<span class="c-notification-unseencount hidden">'+((s=n["if"].call(o,t!=null?t.unseenNotificationCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</span>\n	</span>\n</a>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" html"},3:function(e,t,n,r,i){return" subview-droparound"},5:function(e,t,n,r,i){return" menu"},7:function(e,t,n,r,i){return" auto-size"},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return"max-height: "+f((s=(s=n.staticHeight||(t!=null?t.staticHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"staticHeight",hash:{},data:i}):s))+"px; min-height: "+f((s=(s=n.staticHeight||(t!=null?t.staticHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"staticHeight",hash:{},data:i}):s))+"px; "},11:function(e,t,n,r,i){var s;return"width: "+e.escapeExpression((s=(s=n.staticWidth||(t!=null?t.staticWidth:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"staticWidth",hash:{},data:i}):s))+"px;"},13:function(e,t,n,r,i){return"position: fixed;"},15:function(e,t,n,r,i){return"hide-head"},17:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing;return'			<div class="content text-only'+((s=n["if"].call(u,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||a).call(u,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((o=(o=n.textMessage||(t!=null?t.textMessage:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"textMessage",hash:{},data:i}):o))+"\n			</div>\n"},18:function(e,t,n,r,i){var s;return"padding: "+e.escapeExpression((s=(s=n.contentPadding||(t!=null?t.contentPadding:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"contentPadding",hash:{},data:i}):s))+"px;"},20:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'			<div class="content html-only'+((s=n["if"].call(o,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||u).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.htmlMessage:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n			</div>\n"},22:function(e,t,n,r,i){var s,o=t!=null?t:{};return'			<div class="content subview'+((s=n["if"].call(o,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||n.helperMissing).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></div>\n'},24:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{};return'			<div class="content menu" style="'+((u=(n.ifDefined||t&&t.ifDefined||n.helperMissing).call(a,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n				<ul role="menu">\n'+((u=n.each.call(a,t!=null?t.menuItems:t,{name:"each",hash:{},fn:e.program(25,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"				</ul>\n			</div>\n"},25:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},o[1]!=null?o[1].multiSelect:o[1],{name:"if",hash:{},fn:e.program(26,i,0,s,o),inverse:e.program(31,i,0,s,o),data:i}))!=null?u:""},26:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'							<li role="menuitem" '+((s=n["if"].call(u,t!=null?t.selected:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n								<span class="selection"></span>\n								'+e.escapeExpression((o=(o=n.text||(t!=null?t.text:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"text",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.itemFlag:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</li>\n"},27:function(e,t,n,r,i){return'class="selected"'},29:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return" - "+f((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:u,typeof s===a?s.call(o,{name:"itemFlag",hash:{},data:i}):s))+'<div class="label-new">'+f((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:u,typeof s===a?s.call(o,{name:"itemFlag",hash:{},data:i}):s))+"</div>"},31:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'							<li role="menuitem" '+((s=n["if"].call(u,t!=null?t.isSelected:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(34,i,0),data:i}))!=null?s:"")+">\n								"+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n									"+e.escapeExpression((o=(o=n.text||(t!=null?t.text:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"text",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.itemFlag:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n								"+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</li>\n"},32:function(e,t,n,r,i){return'class="selected-item"'},34:function(e,t,n,r,i){return'tabindex="0"'},36:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'<a href="'+e.escapeExpression((o=(o=n.href||(t!=null?t.href:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"href",hash:{},data:i}):o))+'"'+((s=n["if"].call(u,t!=null?t.className:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"},37:function(e,t,n,r,i){var s;return' class="'+e.escapeExpression((s=(s=n.className||(t!=null?t.className:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"className",hash:{},data:i}):s))+'"'},39:function(e,t,n,r,i){var s;return'<div class="label-new">'+e.escapeExpression((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:n.helperMissing
,typeof s=="function"?s.call(t!=null?t:{},{name:"itemFlag",hash:{},data:i}):s))+"</div>"},41:function(e,t,n,r,i){return"</a>"},43:function(e,t,n,r,i){return"hide-foot"},45:function(e,t,n,r,i){return'		<div class="droparrow up"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i,s,o){var u,a,f=t!=null?t:{},l=n.helperMissing,c="function",h=e.escapeExpression;return'<div class="droparound'+((u=n["if"].call(f,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(1,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(3,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.menuItems:t,{name:"if",hash:{},fn:e.program(5,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+" "+h((a=(a=n.classList||(t!=null?t.classList:t))!=null?a:l,typeof a===c?a.call(f,{name:"classList",hash:{},data:i}):a))+'"\nstyle="'+((u=n["if"].call(f,t!=null?t.staticHeight:t,{name:"if",hash:{},fn:e.program(9,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"\n"+((u=n["if"].call(f,t!=null?t.staticWidth:t,{name:"if",hash:{},fn:e.program(11,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"\n"+((u=n["if"].call(f,t!=null?t.positionFixed:t,{name:"if",hash:{},fn:e.program(13,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n	<div class="head '+((u=n.unless.call(f,t!=null?t.headContent:t,{name:"unless",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n		'+h((a=(a=n.headContent||(t!=null?t.headContent:t))!=null?a:l,typeof a===c?a.call(f,{name:"headContent",hash:{},data:i}):a))+'\n	</div>\n	<div class="body">\n'+((u=n["if"].call(f,t!=null?t.textMessage:t,{name:"if",hash:{},fn:e.program(17,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(20,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(22,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.menuItems:t,{name:"if",hash:{},fn:e.program(24,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'	</div>\n	<div class="foot '+((u=n.unless.call(f,t!=null?t.footContent:t,{name:"unless",hash:{},fn:e.program(43,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n		'+h((a=(a=n.footContent||(t!=null?t.footContent:t))!=null?a:l,typeof a===c?a.call(f,{name:"footContent",hash:{},data:i}):a))+"\n	</div>\n"+((u=n["if"].call(f,t!=null?t.showDropArrow:t,{name:"if",hash:{},fn:e.program(45,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"</div>\n"},useData:!0,useDepths:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-droparound-view",function(e,t){"use strict";var n=require("lib/flog")(t),r,i,s;r={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},i={supportsTransform:!1,droparound:{height:0,width:0}},s=function(e,t,n){var r=e.x,i=e.y,s=e.width,o=e.height,u=e.viewportX,a=t.width,f=t.height,l=n.height,c=n.width,h=n.preferredHorizontalOrientation,p=n.preferredVerticalOrientation,d,v,m,g,y,b=a/2,w=f/2,E=i<w,S=r<b;return p==="down"&&(E=!0),p==="up"&&(E=!1),h==="right"&&(S=!0),h==="left"&&(S=!1),l>u&&(E=!0),i+o+l<u&&(E=!1),E?(g=i+o,y=i+o+l,d={vertical:"down"},S?(v=r,m=r+c,d.horizontal="right"):(v=r-c+s,m=r-s,d.horizontal="left")):(g=i-l,y=i,d={vertical:"up"},S?(v=r,m=r+c,d.horizontal="right"):(v=r-c+s,m=r-s,d.horizontal="left")),{coords:[v,m,g,y],orientation:d}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(n.warn("requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerWithTemplate("fluid-droparound",{textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent"),contentPadding:this.get("contentPadding")}),this.appendAndPosition(),this)},activate:function(){var t=this.get("container"),n=this;e.OverlayManager.DroparoundOverlay.add(this),e.OverlayManager.DroparoundOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList"),hideModalOverlay:this.get("hideModalOverlay"),invisibleOverlay:this.get("invisibleOverlay")}),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;n.close(e)})),e.use("keyboard-manager",function(e){n.registerEventHandler(t.on("keydown",n.keyboardNavigation,n))});var i=this.get("anchorElement"),s=this.get("keyboardAnchorElement");return s||(s=i.hasAttribute("aria-haspopup")?i:i.ancestor("[aria-haspopup=true]")),s&&(this.set("keyboardAnchorElement",s),this.get("keyboardAnchorElement").setAttribute("aria-expanded","true"),this.registerEventHandler(s.on("key",this.enterDroparound,"down:40",this))),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(t.one(r.css.menuContent).delegate(["click","keydown"],function(e){(e.type==="click"||e.keyCode===13)&&this.onMenuItemClick(e)}.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},enterDroparound:function(e){var t=this.get("container").one("ul li");t&&(e.preventDefault(),t.focus())},keyboardNavigation:function(e){var t=e.keyCode,n=t===38||t===9&&e.shiftKey,r=t===40||t===9&&!e.shiftKey,i=e.target.ancestor("li",!0);if(this.appContext.getKeyboardManager().inputHasFocus())return;if(n&&i&&i.previous("li"))e.preventDefault(),this.focusOnPreviousItem(e);else if(r)e.preventDefault(),i&&i.next("li")&&this.focusOnNextItem(e);else if(t===27||n){e.preventDefault();var s=this.get("keyboardAnchorElement");s&&(s.focus(),this.close())}},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.previous("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.next("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(r.css.droparoundContainer):null},loadSubview:function(){var t,n,i=!1,s=this.get("subview"),o=this;t=this.get("container").one(r.css.subviewContent),t.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),n=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(n),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(t){var n=this,i=this.get("container").one(r.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(t.get("container")),t.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&n.fire.apply(n,e.details)}),t.normalizedActivate(),t.recursivelyActivateSubviews(),n.appendAndPosition(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))},onMenuItemClick:function(e){var t,n,i;t=e.target.ancestor("li",!0),t&&(n=this.get("container").one(r.css.menuContent).all("li").indexOf(t),n!==-1&&(i=this.get("menuItems")[n],this.get("multiSelect")&&(i.selected=!i.selected,t.toggleClass("selected")),this.fire("selected",{menuItemIndex:n,menuItem:i,origEvent:e})))},appendAndPosition:function(t){var n=e.one(r.css.destinationContainer),s=this.get("container").one(r.css.droparoundContainer);n&&(n.append(this.get("container")),i.droparound.width=this.get("width")||s.getComputedStyle("width"),i.droparound.height=this.get("height")||s.getComputedStyle("height"
),this.repositionToElement(t||this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,(r+this.get("closeOnScrollDistance")<n||r-this.get("closeOnScrollDistance")>n)&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(e){var t=this.get("container"),n=this.get("positionFixed"),i=t.one(".droparound"),o=this.get("showDropArrow")?i.one(r.css.droparrow):undefined,u=i.one(r.css.droparoundContent),a=u.get("offsetWidth"),f=u.get("offsetHeight"),l,c=o?o.get("offsetHeight"):0,h=e.getXY(),p=h[0],d=h[1],v=e.getDOMNode().getBoundingClientRect(),m={width:i.get("offsetWidth"),height:i.get("offsetHeight")};this.get("preferLeft")&&(m.preferredHorizontalOrientation="left"),this.get("preferRight")&&(m.preferredHorizontalOrientation="right"),this.get("preferTop")&&(m.preferredVerticalOrientation="up"),this.get("preferBottom")&&(m.preferredVerticalOrientation="down");if(!this.anchorCoords||this.x!==0&&this.y!==0)this.anchorCoords={x:n?v.left:p,y:n?v.top:d,width:e.get("offsetWidth"),height:e.get("offsetHeight"),viewportX:e.getDOMNode().getBoundingClientRect().top||0};var g=s(this.anchorCoords,{width:this.appContext.viewportData.getWidth(),height:this.appContext.viewportData.getHeight()},m);g.orientation.vertical==="down"?g.coords[2]+=c-this.get("anchorOffsetVertical"):g.coords[2]-=c+this.get("anchorOffsetVertical"),g.orientation.horizontal==="right"?g.coords[0]-=this.get("anchorOffsetHorizontal"):g.coords[0]+=this.get("anchorOffsetHorizontal"),i.setStyles({left:g.coords[0],top:g.coords[2]}),o&&(o.removeClass("down").removeClass("up").removeClass("left").removeClass("right").addClass(g.orientation.vertical),g.orientation.horizontal==="left"?o.setStyles({right:10+this.get("mirrorArrowAdjustment"),left:"auto"}):o.setStyles({left:10+this.get("mirrorArrowAdjustment")})),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(l={width:a+"px",height:f+"px"},u.setStyles(l))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0;var n=this.get("keyboardAnchorElement");n&&(n.setAttribute("aria-expanded","false"),n.focus(),n.addClass("no-outline")),this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},keyboardAnchorElement:{value:null},showDropArrow:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:undefined,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e
.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferRight:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},forceRight:{value:null},autoSizeToContent:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-droparound","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("hermes-template-notifications",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"		<li>\n			"+e.escapeExpression(e.lambda(t,t))+"\n		</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="notifications-container" style="width: '+l((o=(o=n.width||(t!=null?t.width:t))!=null?o:a,typeof o===f?o.call(u,{name:"width",hash:{},data:i}):o))+"; height: "+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+"; overflow-x: "+l((o=(o=n.overflowX||(t!=null?t.overflowX:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowX",hash:{},data:i}):o))+"; overflow-y: "+l((o=(o=n.overflowY||(t!=null?t.overflowY:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowY",hash:{},data:i}):o))+';">\n	<header>\n		<h2>'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'</h2>\n		<a href="/mail" class="mail-icon">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:i}))+' <span class="flickr-mail-count"></span></a>\n	</header>\n	<ul class="notifications-list" style="max-height: '+l((o=(o=n.listHeight||(t!=null?t.listHeight:t))!=null?o:a,typeof o===f?o.call(u,{name:"listHeight",hash:{},data:i}):o))+';">\n		<li class="notifications-empty-state hidden">\n			'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_NOTHING_HERE"},data:i}))+"\n		</li>\n"+((s=n.each.call(u,t!=null?t.notifications:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	</ul>\n\n	<a href="/activity" class="view-all">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_VIEW_RECENT_ACTIVITY"},data:i}))+"</a>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{readOnly:!0,derivedBy:["iconfarm","iconserver","nsid"],getter:function(t,n){var r=this.getValue(n,"iconfarm"),i=this.getValue(n,"iconserver"),s=this.getValue(n,"nsid");return e.URLHelper.getBuddyIconURL(s,r,i)}},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});
YUI.add("notification-group-discussion-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(t,n,r,i){var s={id:t,pathAlias:n,title:r.name,replyCount:r.replies,groupID:r.group_id,groupName:r.groupName,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.iconurls),coverPhotoUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.coverphoto_url),group:i};return s},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")+"/discuss/"+e}},groupUrl:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")}},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGalleryModel:function(t){var n={id:t.id,pathAlias:t.pathalias,title:t.title._content,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(t.iconurls),owner:{id:t.owner,username:t.ownername,displayname:t.realname}};return n},attributes:{id:{},title:{},pathAlias:{},url:{readOnly:!0,derivedBy:["id","owner","pathAlias"],defaultFn:function(e){var t=this.getValue(e,"pathAlias")||this.getValue(e,"owner").id;return"/photos/"+t+"/galleries/"+e}},iconUrls:{},owner:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-flickrmail-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseFlickrMailModel:function(e){var t={id:e.id,isMuted:e.is_muted};return t},attributes:{id:{},isMuted:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-fave-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-comment-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{},content:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-follower-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-added-to-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},gallery:{},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-people-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},personTagged:{isModel:!0},tagger:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-photo-comment-mention-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
