YUI.add("hermes-template-feed-loading-placeholder",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="feed-loading-placeholder">\n	<div class="activity-card placeholder first">\n		<div class="activity-card-photos">\n		</div>\n		<div class="activity-card-content">\n		</div>\n	</div>\n\n	<div class="activity-card placeholder second">\n		<div class="activity-card-photos">\n		</div>\n		<div class="activity-card-content">\n		</div>\n	</div>\n\n	<div class="activity-card placeholder third">\n		<div class="activity-card-photos">\n		</div>\n		<div class="activity-card-content">\n		</div>\n	</div>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/feed-loading-placeholder",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-meta",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'name="'},3:function(e,t,n,r,i){return'property="'},5:function(e,t,n,r,i){return'description="'+e.escapeExpression(e.lambda(t,t))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u,a=t!=null?t:{},f=n.helperMissing,l="function",c=e.escapeExpression,h="<meta "+((s=n["if"].call(a,t!=null?t.isName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+c((o=(o=n.metaName||(t!=null?t.metaName:t))!=null?o:f,typeof o===l?o.call(a,{name:"metaName",hash:{},data:i}):o))+'" content="'+c((n.renderMetaInfo||t&&t.renderMetaInfo||f).call(a,t!=null?t.metaValue:t,{name:"renderMetaInfo",hash:{},data:i}))+'" ';return s=(o=(o=n.metaDescription||(t!=null?t.metaDescription:t))!=null?o:f,u={name:"metaDescription",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i},typeof o===l?o.call(a,u):o),n.metaDescription||(s=n.blockHelperMissing.call(t,s,u)),s!=null&&(h+=s),h+' data-dynamic="true">\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-meta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-recovery-email-modal",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="recovery-email-modal-view">\n	<h3 style="margin: 0">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_ADD_EMAIL_TITLE"},data:i}))+"</h3>\n	<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_IF_FORGET_PASSWORD"},data:i}))+"</p>\n	\n	<div>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.LOGIN_EMAIL"},data:i}))+'</div>\n	<div class="email-name">'+a((s=(s=n.email||(t!=null?t.email:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"email",hash:{},data:i}):s))+"</div>\n	<div>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_EMAIL"},data:i}))+'</div>\n	<div class="input-container">\n		<input type="text" placeholder="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_ENTER_EMAIL"},data:i}))+'" />\n		<p class="validation-message hidden">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_INVALID_EMAIL"},data:i}))+'</p>\n	</div>\n	<div class="button-container">\n		<button class="large action add-recovery-email-button">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.ADD_RECOVERY_EMAIL"},data:i}))+'</button>\n	</div>\n	<div class="button-container">\n		<a class="cancel-recovery-email-button">\n			'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_NOT_NOW"},data:i}))+"\n		</a>\n	</div>\n\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/recovery-email-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-recovery-email-confirm-modal",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'<div class="recovery-email-confirm-modal-view">\n	<h3 style="margin: 0">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_CONFIRM_TITLE"},data:i}))+'</h3>\n	<p class="email-line">'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{email:t!=null?t.email:t,intlName:"feed.RECOVERY_CHECK_EMAIL_VERIFY"},data:i}))+"</p>\n	<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_YOU_MAY_RECEIVE_EMAILS"},data:i}))+'</p>\n	\n	<div class="button-container">\n		<button class="large action recovery-email-confirm-button">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"feed.RECOVERY_GOT_IT"},data:i}))+"</button>\n	</div>\n\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/recovery-email-confirm-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("model-proxy",function(e,t){var n=require("lib/flog")(t);e.getModelProxyConstructor=function(t){function i(e){return function(){var n=new Array(arguments.length);for(var r=0;r<n.length;++r)n[r]=arguments[r];return n.unshift(this.id),t[e].apply(t,n)}}var r;return r=function(e){this.id=e,this.registry=t,this.isModel=!0},r.prototype={},e.getModelProxyConstructor.skipList.forEach(function(e){r.prototype[e]=function(){var t=new Error("Registry methods are not exposed on models.");throw n.error({err:t,method:e}),t}}),e.Object.each(t,function(t,n){if(r.prototype[n])return;if(n.indexOf("_")===0)return;if(!e.Lang.isFunction(t))return;if(Object.keys(t.prototype).length>0)return;r.prototype[n]=i(n)},this,!0),r},e.getModelProxyConstructor.skipList=["add","get","load","proxy","remoteRead","remoteCreate","attributeSearch","removeAll","getCount","serialize","deserialize"]},"@VERSION@",{requires:[]});
YUI.add("flickr-collection",function(e){var t={},n;n=e.FlickrCollection=function(e,t,n){this.registry=e,this.id=t,this.attrName=n,this._data=[],this.fetchedStart=!1,this.fetchedEnd=!1,this.totalItems=Number.MAX_VALUE},n.prototype={constructor:n,push:function(e){var t=this._data.concat();t.push(e),this.registry.setValue(this.id,this.attrName,t)},unshift:function(e){var t=this._data.concat();t.unshift(e),this.registry.setValue(this.id,this.attrName,t)},concat:function(e){var t=this._data.concat(e);this.registry.setValue(this.id,this.attrName,t)},remove:function(e){typeof e=="string"&&(e={id:e});var t=this.find(e,!0),n;return t&&(n=this._data.concat(),n.splice(t.index,1),this.registry.setValue(this.id,this.attrName,n)),t&&t.value},find:function(e,t){if(!e)return null;var n=null,r=Object.keys(e);return this._data.some(function(t,i){if(!t)return;if(r.every(function(n){return t[n]===e[n]}))return n={value:t,index:i},!0}),t?n:n?n.value:null},getFirstItem:function(){var e,t;for(e=0;e<this._data.length;e++){t=this._data[e];if(t)return{item:t,index:e}}return null},getLastItem:function(){var e,t;for(e=this._data.length-1;e>=0;e--){t=this._data[e];if(t)return{item:t,index:e}}return null},getList:function(){return this._data.concat()},size:function(){return this._data.length},toJSON:function(){var t=[];return e.Array.each(this.getList(),function(e){e&&t.push(e.toJSON())}),t},toString:function(){return this.registry.name+'["'+this.attrName+'"]'},appendToListMulti:function(e){this.concat(e)},appendToList:function(e){this.push(e)},prependToList:function(e){this.unshift(e)},getFromListByID:function(e,t){var n={},r;return n[t||"id"]=e,r=this.find(n),r?r:undefined},removeFromList:function(e,t){var n={};return n[t||"id"]=e,this.remove(n)},hasMinBoundary:function(){return this.fetchedStart},hasMaxBoundary:function(){return this.fetchedEnd},_setValue:function(e){this._data=e}},e.FlickrCollection.executeFetch=function(n,r,i,s){var o,u;return!s||!e.Lang.isFunction(s.run)?e.Promise.reject("(flickr-collection::executeFetch) invalid fetcher for "+r.name+"["+i+"]"):(o=JSON.stringify(n),u=t[o],u?u:(t[o]=s.run.call(s,n,r.appContext).then(function(e){return delete t[o],e},function(e){throw delete t[o],e}),t[o]))},e.FlickrCollection.trimArray=function(e){var t=0,n=e.length-1;while(t<e.length&&!e[t])t++;while(n>t&&!e[n])n--;return e.slice(t,n+1)}},"@VERSION@",{requires:[]});
YUI.add("paged-collection",function(e,t){function r(t){var r={page:1,perPage:0,pageContent:[]};return t?(t instanceof Array&&(t={pageContent:t}),t=e.merge(r,t),t):(n.warn("No pageData sent to PagedCollection; aborting."),null)}var n=require("lib/flog")(t);e.PagedCollection=function(e,t,n,r){this.constructor.superclass.constructor.call(this,e,t,n),r&&(r instanceof Array&&(r={pageContent:r,page:1,perPage:r.length}),r.totalPages&&(this.totalPages=r.totalPages),r.totalItems&&(this.totalItems=r.totalItems),this.fetchedStart=!!r.fetchedStart,this.fetchedEnd=!!r.fetchedEnd,this.addPage(r))},e.extend(e.PagedCollection,e.FlickrCollection,{getPage:function(t){var n,r,i,s,o,u,a;if(!t||!t.page||!t.perPage||t.forceAPICall)t||(t={}),s=!0;else{u=this.totalPages&&t.page>=this.totalPages,a=this.totalItems&&r>=this.totalItems,n=t.perPage*(t.page-1),r=Math.min(t.perPage*t.page,this.totalItems);if(!u&&!a||!this.fetchedEnd)for(i=n;i<r;i++)if(typeof this._data[i]=="undefined"||!this._data[i].exists()){s=!0;break}}return s?(t.pathAlias||(t.id=this.id),t.isCollection=!0,o=this.registry.attributes[this.attrName].pageFetch,o.fetchParams&&(t=e.merge(t,o.fetchParams)),e.FlickrCollection.executeFetch(t,this.registry,this.attrName,o.listFetcher)):e.when(this._data.slice(n,r))},addPage:function(e){var t=e.perPage*(e.page-1),n=t+Math.min(e.pageContent.length,e.perPage),r,i=0;if(e.forceAppend)this._data=this._data.concat(e.pageContent);else if(this._data.length<=t)this._data.length=t,this._data=this._data.concat(e.pageContent);else{this._data.length<n&&(this._data.length=n);for(r=t;r<n;r++)this._data[r]=e.pageContent[i],i++}e.totalPages&&(this.totalPages=e.totalPages,e.page>=this.totalPages&&(this.fetchedEnd=!0)),e.totalItems&&(this.totalItems=e.totalItems,this._data.length>=e.totalItems?this.fetchedEnd=!0:t+parseInt(e.perPage,10)>e.totalItems&&this._data.length<e.totalItems&&(this.fetchedEnd=!0)),this.fetchedStart=this._data&&typeof this._data[0]!="undefined"},removePage:function(e){},getPageOf:function(e,t){t||(n.warn("`perPage` must be specified; defaulting to 50."),t=50);var r=this.find(e,!0);return r?Math.floor(r.index/t)+1:-1},getNextIncompletePage:function(e){var t=e.page*(e.perPage-1),n=Math.floor(this._data.length/e.perPage)+1;for(t;t<this._data.length;t++)if(typeof this._data[t]=="undefined"||!this._data[t].exists()){n=Math.floor(t/e.perPage)+1;break}return n},_setValue:function(e){if(e instanceof Array)this.constructor.superclass._setValue.call(this,e);else{e=r(e);if(!e)return;e.remove?this.removePage(e):this.addPage(e)}}})},"@VERSION@",{requires:["flickr-collection"]});
YUI.add("flickr-model-registry",function(e,t){function i(t,n,r){return r===!1&&typeof t=="string"&&typeof n=="string"&&(t=t.toLowerCase(),n=n.toLowerCase()),t===n?!0:e.moment.isMoment(t)&&e.moment.isMoment(n)?t.diff(n)===0:e.Lang.isArray(t)&&e.Lang.isArray(n)&&s(t,n)?!0:e.Lang.isObject(t,!0)&&e.Lang.isObject(n,!0)&&o(t,n)?!0:!1}function s(t,n){var r=!0;return t.length!==n.length&&(r=!1),r&&e.Array.some(t,function(e,t){if(!i(n[t],e))return r=!1,!0}),r}function o(t,n){var r=!0;return e.Object.size(t)!==e.Object.size(n)&&(r=!1),r&&e.Object.some(t,function(e,t){if(!n.hasOwnProperty(t)||!i(n[t],e))return r=!1,!0}),r&&e.Object.some(n,function(e,n){if(!t.hasOwnProperty(n)||!i(t[n],e))return r=!1,!0}),r}function u(t){var n=t;return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Array.prototype?(n=t.slice(),typeof t.hasMinBoundary!="undefined"&&(n.hasMinBoundary=t.hasMinBoundary),typeof t.hasMaxBoundary!="undefined"&&(n.hasMaxBoundary=t.hasMaxBoundary)):Object.getPrototypeOf(t)===Object.prototype&&(n={},e.Object.each(t,function(e,t){n[t]=e},this))),n}var n=require("lib/flog")(t);e.Models={};var r=e.FlickrModelRegistry=function(t){this.appContext=t,this.attributes=this.attributes||{},this.attributes.id={writeOnce:"initOnly",setter:function(t){return e.Lang.isString(t)||(e.Lang.isNumber(t)?t+="":(n.warn("`id` falling back to a Y.guid",{topic:this.name,val:t}),t=e.guid())),t}},this._setDefaultRemoteMethods(),this._validateAttributes(),this._data={},this._dataSize=0,this._subscribers=[],this.hasWeakSubscribers=!1,this._chainedEvents={},this._derivedCache=undefined,this._unsavedModels={}};r.prototype={attributeSearch:function(t,n){var r=[];return t.id?r.push(t.id):e.Object.each(this._data,function(s,o){var u=!0;e.Object.some(t,function(e,t){if(!i(e,s[t],!1)){if(n!==!0)return u=!1,!0;if(!i(e,this.getDefaultValue(s.id,t),!1))return u=!1,!0}},this),u&&r.push(o)},this),r},load:function(t,n){var r=this,i,s;return n||(n={}),e.Lang.isObject(t,!0)?(i=this.attributeSearch(t).sort()[0],n=e.merge(t,n||{})):(i=t,n=e.merge({id:i},n)),i&&this.exists(i)?e.when(i):(this._fetchPromises||(this._fetchPromises={}),s=i||JSON.stringify(n),this._fetchPromises[s]?this._fetchPromises[s]:(this._fetchPromises[s]=this.remoteRead(n).then(function(){var e=i,n,o;i||(n=r.attributeSearch(t),n.length>0&&(e=n[0])),delete r._fetchPromises[s];if(e&&r.exists(e))return e;throw o=new Error("["+r.name+"] Model ID is missing after fetching."),o.getModelFailure=!0,o}),this._fetchPromises[s]))},get:function(e,t){return this.load(e,t).then(this.proxy.bind(this))},add:function(t,r,i){var s;if(!e.Lang.isObject(t,!0)||e.Lang.isArray(t)){n.warn("`add` requires an object",{topic:this.name,data:t});return}return typeof r=="undefined"&&(r=!1),s=this.attributes.id.setter.apply(this,[t.id,undefined]),this._data[s]?n.warn("Attempt to add a model that is already in the registry.",{topic:this.name,id:s}):(this._data[s]={},this._dataSize++,this._queueEvent("modelsAdded",{id:s}),r?this._data[s]=t:Object.keys(this.attributes).forEach(function(e){var n=this.attributes[e],r=t[e];n.readOnly||this.setValue(s,e,r,!0,i)},this),this.appContext.markAsNewlyFetched(this.name,s)),this.proxy(s)},remove:function(e){if(!this.exists(e))return;delete this._data[e],this._dataSize--,this._removeChainedEvents(e),this._removeEventSubscribers(e),this._queueEvent("modelsRemoved",{id:e})},removeAll:function(){e.Object.each(this._data,function(e,t){this.remove(t)},this)},removeAllExcept:function(t){var n=t.reduce(function(e,t){return e[t]=!0,e},{});e.Object.each(this._data,function(e,t){n[t]||this.remove(t)},this)},_removeChainedEvents:function(t){var n;this._chainedEvents[t]&&(e.Object.each(this._chainedEvents[t],function(t,r){n=this.attributes[r],n&&(n.isModel?t.detach():(n.isListProxy||n.isCollection)&&e.Array.each(t,function(e){e.detach&&e.detach()}))},this),delete this._chainedEvents[t])},_removeEventSubscribers:function(t){var n=[];this._subscribers.length&&(e.Array.each(this._subscribers,function(e,r){e.id===t&&n.push(r)},this),e.Array.each(n,function(e){this._subscribers.splice(e,1)},this))},proxy:function(t){return this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this)),new this._ModelProxy(t)},getValue:function(t,r,i){var s,o,a;if(!t||!r){n.warn("`getValue` requires two arguments.",{topic:this.name,id:t,attr:r});return}if(!this.exists(t)){n.warn("`getValue` called for an id that doesn't exist in the registry.",{topic:this.name,id:t,attr:r});return}o=this.attributes[r];if(!o){n.warn("`getValue` called for an attribute that isn't defined",{topic:this.name,id:t,attr:r});return}return o.isListProxy?s=new e.ListProxy(this,t,r):(s=this._data[t][r],typeof s=="undefined"&&(s=this.getDefaultValue(t,r)),a=o.getter,!i&&a&&(s=a.apply(this,[s,t])),s=u(s)),s},setValue:function(t,r,s,o,a){var f,l,c,h,p,d,v;if(!t||!r||arguments.length<3){n.warn("`setValue` requires three arguments.",{topic:this.name,id:t});return}if(!this.exists(t)){n.warn("`setValue called for an id that is not in the registry.",{topic:this.name,id:t});return}f=this.attributes[r];if(!f){n.warn("Attribute is not present in the attributes list.",{topic:this.name,id:t,attr:r});return}if(f.readOnly){n.warn("Attribute is readOnly.",{topic:this.name,id:t,attr:r});return}if(f.writeOnce==="initOnly"&&!o){n.warn("Attribute can only be set during initialization.",{topic:this.name,id:t,attr:r});return}if(f.writeOnce===!0&&this._data[t][r]){n.warn("Attribute can only be set once.",{topic:this.name,id:t,attr:r});return}c=this.getValue(t,r),h=this._data[t][r],f.isListProxy&&(c=h);if(!a&&f.validator){d=f.validator;if(!e.Lang.isFunction(d)){n.warn("Attribute has an invalid validator.",{topic:this.name,validator:f.validator,attr:r});return}if(!d.apply(this,[s,t])){n.info("Attribute validation failed.",{topic:this.name,id:t,val:s,attr:r});return}}s=u(s),!a&&f.setter&&(s=f.setter.apply(this,[s,t])),f.isListProxy&&!e.Lang.isArray(s)&&(s=[]),f.isCollection&&(s?typeof s=="object"&&s instanceof e.PagedCollection||(c?(h=c
.getList(),c._setValue(s),s=c):(h=null,s=new e.PagedCollection(this,t,r,s))):s=new e.PagedCollection(this,t,r));if(!this._isDifferentValue(t,r,s,c)){!o;return}if(f.isModel)if(!e.Lang.isObject(s)||!s.isModel){n.warn("Attribute must be a ModelProxy instance.",{topic:this.name,id:t,attr:r});return}o||(l=this._getAttributeValuesDerivedBy(t,r)),this._data[t][r]=s,f.isListProxy&&s&&(s.hasMinBoundary&&this.getValue(t,r).setMinBoundary(),s.hasMaxBoundary&&this.getValue(t,r).setMaxBoundary()),(f.isModel||f.isListProxy||f.isCollection)&&this._chainEvents(t,r),o||(p=this.getValue(t,r),!f.isListProxy&&!f.isCollection&&this._setUnsaved(t,r,p,c,h),v={id:t,attrName:r,prevVal:c,newVal:p},f.isListProxy?v.listDiff=this._calcListDiff(p,c):f.isCollection&&(v.listDiff=this._calcListDiff(p,h)),this._queueEvent("valuesChanged",v),e.Object.size(l)&&e.Object.each(l,function(e,n){var s=this.getValue(t,n);if(!i(s,e)){v={id:t,attrName:n,prevVal:e,newVal:s,derivedBy:[r]};if(this.attributes[n].isListProxy||this.attributes[n].isCollection)v.listDiff=this._calcListDiff(s,e);this._queueEvent("valuesChanged",v)}},this))},setValues:function(t,n){var r={};e.Object.each(n,function(e,n){n!=="id"&&(r[n]=this.setValue(t,n,e))},this)},revertValue:function(e,t){this._unsavedModels[e]&&typeof this._unsavedModels[e][t]!="undefined"&&this.setValue(e,t,this._unsavedModels[e][t].lastSavedValRaw)},exists:function(t){var n;return e.Lang.isArray(t)?n=t[0]:e.Lang.isObject(t,!0)?n=this.attributeSearch(t)[0]:n=t,!!this._data[n]},addOrUpdate:function(e){if(this.exists(e.id)){var t,n;Object.keys(e).forEach(function(r){t=this.attributes[r],n=e[r],t&&!t.readOnly&&t.writeOnce!=="initOnly"&&this.setValue(e.id,r,n)},this)}else this.add(e);return this.appContext.markAsNewlyFetched(this.name,e.id),this.markChildModelsAsNewlyFetched(e.id),this.proxy(e.id)},markChildModelsAsNewlyFetched:function(e){var t=this.getOwnedModels(e),n=this;t.forEach(function(e){e&&(n.appContext.markAsNewlyFetched(e.registry.name,e.id),e.markChildModelsAsNewlyFetched(e.id))})},getOwnedModels:function(t){var r,i,s=[],o;if(!t)return n.warn("`getOwnedModels` requires a model id.",{topic:this.name,id:t}),s;if(!this.exists(t))return s;this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this));for(r in this.attributes){i=this.attributes[r];if(i.isModel)o=this.getValue(t,r),o&&o.exists()&&s.push(o);else if(i.isListProxy||i.isCollection)s=s.concat(this.getValue(t,r).getList().filter(function(e){return e&&e.isModel&&e.exists()}))}return s},hasAttribute:function(e){return!!this.attributes[e]},toJSON:function(e){var t={},n,r;if(e)for(n in this.attributes)t[n]=this.getValue(e,n),t[n]&&(this.attributes[n].isModel||this.attributes[n].isListProxy||this.attributes[n].isCollection)&&(t[n]=t[n].toJSON());else for(r in this._data)t[r]=this.toJSON(r);return t},on:function(t,n,r,i){var s;return t||(t=null),s={eventName:n,fn:r,id:t,weak:i},this._subscribers.push(s),i&&(this.hasWeakSubscribers=!0),{detach:function(){var t=e.Array.indexOf(this._subscribers,s);this._subscribers.splice(t,1)}.bind(this)}},removeWeakSubscribers:function(){var e=this._subscribers.length;if(e)while(e--)this._subscribers[e].weak&&this._subscribers.splice(e,1);this.hasWeakSubscribers=!1},getCount:function(){return this._dataSize},getDefaultValue:function(e,t){var n,r;return n=this.attributes[t],typeof n.defaultFn=="function"&&(r=n.defaultFn.call(this,e)),typeof r=="undefined"&&typeof n.defaultValue!="undefined"&&(r=n.defaultValue),r},_isDifferentValue:function(e,t,n,r){var s=this.attributes[t],o=s.getter;o&&(n=o.apply(this,[n,e]));if(typeof s.isListProxy!="undefined"&&s.isListProxy&&typeof r!="undefined"){if(n.hasMaxBoundary!==(typeof r.hasMaxBoundary!="undefined"&&r.hasMaxBoundary)||n.hasMinBoundary!==(typeof r.hasMinBoundary!="undefined"&&r.hasMinBoundary))return!0}else if(s.isCollection)return!0;return i(n,r)?!1:!0},_calcListDiff:function(t,n){var r,i,s,o,u={added:null,removed:null};return t instanceof e.ListProxy||t instanceof e.PagedCollection?r=t.getList():r=t,n instanceof e.ListProxy||n instanceof e.PagedCollection?i=n.getList():i=n,s=i.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{}),o=r.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{}),u.added=r.filter(function(e){return e&&!s[e.id]}),u.removed=i.filter(function(e){return e&&!o[e.id]}),u},_getAttributesDerivedBy:function(t){return this._derivedCache||(this._derivedCache={},e.Object.each(this.attributes,function(t,n){t.derivedBy&&e.Lang.isArray(t.derivedBy)&&e.Array.each(t.derivedBy,function(e){this._derivedCache[e]||(this._derivedCache[e]=[]),this._derivedCache[e].push(n)},this)},this)),this._derivedCache[t]},_getAttributeValuesDerivedBy:function(t,n){var r=this._getAttributesDerivedBy(n),i={};return r&&r.length&&e.Array.each(r,function(e){i[e]=this.getValue(t,e)},this),i},_queueEvent:function(t,n){var r;this._eventQueue||(this._eventQueue=[]),r=this._eventQueue,r.push({type:t,data:n}),this._eventPending||(this._eventPending=!0,setTimeout(function(){var t={};this._eventPending=!1,delete this._eventQueue,e.Array.each(r,function(e){var n=e.type,r=e.data,i=r.id;switch(n){case"modelsAdded":case"modelsRemoved":t[n]=t[n]||{},t[n][i]=r;break;case"valuesChanged":if(t.valuesChanged&&t.valuesChanged[i]&&t.valuesChanged[i][r.attrName]&&t.valuesChanged[i][r.attrName].newVal){t.valuesChanged[i][r.attrName].newVal=r.newVal,t.valuesChanged[i][r.attrName].derivedBy&&r.derivedBy&&(t.valuesChanged[i][r.attrName].derivedBy=t.valuesChanged[i][r.attrName].derivedBy.concat(r.derivedBy)),t.valuesChanged[i][r.attrName].chained&&!r.chained&&delete t.valuesChanged[i][r.attrName].chained;break}t.valuesChanged=t.valuesChanged||{},t.valuesChanged[i]=t.valuesChanged[i]||{},t.valuesChanged[i][r.attrName]=r}}),e.Object.each(t,function(e,t){this._fireEvent(t,e)},this)}.bind(this),0))},_fireEvent:function(t,n){e.Array.each(this._subscribers,function(e){e.eventName===t&&(e.id?n[e.id]&&e.fn.call(undefined,n[e.id]):e.fn.call(undefined,n))})},_chainEvents:function(t,n){var r=
this.attributes[n],i,s;this._chainedEvents[t]=this._chainedEvents[t]||{};if(r.isModel)this._chainedEvents[t][n]&&this._chainedEvents[t][n].detach(),s=this.getValue(t,n),this._chainedEvents[t][n]=s.on("valuesChanged",function(e){this._queueChainedEvent(t,n)}.bind(this));else if(r.isListProxy||r.isCollection)this._chainedEvents[t][n]&&e.Array.each(this._chainedEvents[t][n],function(e){e.detach()}),this._chainedEvents[t][n]=[],i=this.getValue(t,n),e.Array.each(i.getList(),function(e){e&&this._chainedEvents[t][n].push(e.on("valuesChanged",function(e){this._queueChainedEvent(t,n)}.bind(this)))},this)},_queueChainedEvent:function(t,n){var r=this.getValue(t,n),i;this._queueEvent("valuesChanged",{id:t,attrName:n,prevVal:r,newVal:r,chained:!0}),i=this._getAttributeValuesDerivedBy(t,n),e.Object.size(i)&&e.Object.each(i,function(e,r){this._queueEvent("valuesChanged",{id:t,attrName:r,newVal:e,derivedBy:[n],chained:!0})},this)},_deleteUnsaved:function(t,n){this._unsavedModels[t]&&this._unsavedModels[t][n]&&(delete this._unsavedModels[t][n],e.Object.size(this._unsavedModels[t])===0&&delete this._unsavedModels[t])},_setUnsaved:function(e,t,n,r,s){this._unsavedModels[e]&&this._unsavedModels[e][t]?i(n,this._unsavedModels[e][t].lastSavedVal)&&this._deleteUnsaved(e,t):(this._unsavedModels[e]=this._unsavedModels[e]||{},this._unsavedModels[e][t]={lastSavedVal:r,lastSavedValRaw:s})},_validateAttributes:function(){var t,r;t=["setter","getter","validator","defaultValue","defaultFn","derivedBy","readOnly","writeOnce","isModel","serialize","deserialize"],r=["isListProxy","isCollection","pageFetch","contextFetch","rangeFetch"],e.Object.each(this.attributes,function(i,s){e.Object.each(i,function(o,u){i.isListProxy||i.isCollection?e.Array.indexOf(r,u)===-1&&n.warn("Unknown property on collection attribute.",{topic:this.name,prop:u,attr:s}):e.Array.indexOf(t,u)===-1&&n.warn("Unknown property on attribute.",{topic:this.name,prop:u,attr:s})},this)},this)},_setDefaultRemoteMethods:function(){this.remote=this.remote||{},this.remote.create||(this.remote.create=function(t){return n.error("`remote.create` was called without being implemented.",{topic:this.name,attrs:t}),e.Promise.reject()}),this.remote.read||(this.remote.read=function(t){Object.keys(this.attributes).some(function(e){var t=this.attributes[e];if(e!=="id"&&!t.readOnly&&!t.isListProxy&&!t.isCollection&&!t.defaultValue&&!t.defaultFn)return!0},this),typeof t!="object"&&(t={id:t});var n={id:t.id};return this.add(n),e.Promise.resolve(n)}),this.remote.update||(this.remote.update=function(t,r){return n.error("`remote.update` was called without being implemented.",{topic:this.name,id:t,attrs:r}),e.Promise.reject()}),this.remote["delete"]||(this.remote["delete"]=function(t){return n.error("`remote.delete` was called without being implemented.",{topic:this.name,id:t}),e.Promise.reject()})},remoteCreate:function(e){return this.remote.create.call(this,e)},remoteRead:function(e){return this.remote.read.call(this,e)},remoteUpdate:function(t){var n={},r=this;return this._unsavedModels[t]&&e.Object.each(this._unsavedModels[t],function(e,r){n[r]={newVal:this.getValue(t,r),prevVal:e.lastSavedVal}},this),e.Object.size(n)>0?this.remote.update.call(this,t,n).then(function(e){return r._unsavedModels={},e}):e.Promise.resolve()},remoteBatchUpdate:function(e,t){return this.remote.batchUpdate.call(this,e,t)},remoteDelete:function(e){var t=this;return this.remote["delete"].call(this,e).then(function(){t.remove(e)})},getListPageByContinuation:function(t,n){var r=this,i=r.appContext,s,o,u,a,f,l,c,h,p,d,v="0",m="-1",g=e.APIHelper.request.getRebootPhotoExtras();switch(r.name){case"photo-groups-models":s="group-pool-models",o="groups",u="flickr.photos.getGroups",a="groups.group",g+=","+e.APIHelper.request.getRebootGroupExtras();break;case"photo-sets-models":s="set-models",o="sets",u="flickr.photos.getSets",a="sets.set";break;case"photo-galleries-models":s="gallery-models",o="galleries",u="flickr.photos.getGalleries",a="galleries.gallery"}return u?r.exists(t)?(r.continuationKeys=r.continuationKeys||{},r.getMorePromises=r.getMorePromises||{},l=r.continuationKeys[t]||v,l===m?e.Promise.resolve({newItems:[],loadedAll:!0}):(l===v&&(n+=r.getValue(t,o).getList().length),f={photo_id:t,extras:g,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:l,per_page:n},h=t+"_"+l,p=r.getMorePromises[h],p?p:(d={apiResponse:i.callAPI(u,f,!0),contextRegistry:i.getModelRegistry(s),personRegistry:i.getModelRegistry("person-models")},r.name==="photo-groups-models"&&(d.groupRegistry=i.getModelRegistry("group-models")),r.getMorePromises[h]=(new e.FlickrPromise(d)).then(function(n){var i=[],s=n.apiResponse,u=n.contextRegistry,f=n.personRegistry,l=n.groupRegistry,p,d,v;return d=a.split(".").reduce(function(t,n){return e.Lang.isObject(t)?t[n]:undefined},s),d&&(e.Array.each(d,function(t){e.APIHelper.response.addContextToRegistry(t,u,f,l),i.push(u.proxy(t.id))}),i.length&&(v=r.getValue(t,o).getList().map(function(e){return e.getValue("id")}),i=i.filter(function(e){return v.indexOf(e.getValue("id"))===-1}),i.length&&r.getValue(t,o).appendToListMulti(i))),c=s[o].continuation,typeof c=="undefined"?c=m:e.Lang.isNumber(c)&&(c+=""),p=c===m,r.continuationKeys[t]=c,delete r.getMorePromises[h],{newItems:i,loadedAll:p}},function(e){throw delete r.getMorePromises[h],e}),r.getMorePromises[h]))):e.Promise.reject("[api-helper] getListPageByContinuation was called for an ID that isn't in the registry: "+t):e.Promise.reject("[api-helper] getListPageByContinuation was called without an invalid registry type: "+r.name)},getBuriedValue:function(e,t){var n,r={};return n=this.getValue(e,t),n&&n.payload&&(r=n.payload),r},setBuriedValue:function(e,t,n,r){return this.setValue(e,t,{payload:n},r)}},e.mix(r.prototype,e.Localizable)},"@VERSION@",{requires:["flickr-promise","model-proxy","list-proxy","moment","paged-collection","localizable"]});
YUI.add("attribute-helpers",function(e){function t(e){if(typeof e=="undefined"||e===null)return!0}function n(n){return t(n)?!0:e.Lang.isString(n)?!0:e.Lang.isNumber(n)?!0:!1}function r(t){return e.Lang.isNumber(t)&&(t=t.toString()),e.Lang.isString(t)?t:undefined}function i(n){return t(n)?!0:[!0,!1].indexOf(n)!==-1?!1:n instanceof Array?!1:(typeof n=="string"&&(n=parseInt(n,10)),typeof n=="object"&&typeof n._d!="undefined"&&(n=n._d),e.moment(n).isValid()?!0:!1)}function s(t){var n=null,r=null;if(e.moment.isMoment(t))return t;if(t&&typeof t=="object"&&t._d){r=e.moment(t),r.isValid()||(r=e.moment(t._d));if(r.isValid())return r}return typeof t=="number"||t===parseInt(t,10).toString()?(n=parseInt(t,10),n.toString().length<=10?r=e.moment(n.toString(),"X"):r=e.moment(n),r):t&&!e.Lang.isBoolean(t)&&(e.moment(new Date(t)).isValid()||e.moment(new Date(t.toString().replace(" ","T"))).isValid())?e.moment(t):undefined}function o(n){return t(n)?!0:(e.Lang.isString(n)&&(n=parseInt(n,10)),e.Lang.isNumber(n)?!0:!1)}function u(t){return e.Lang.isString(t)&&(t=parseInt(t,10)),e.Lang.isNumber(t)?t<0?Math.ceil(t):Math.floor(t):undefined}function a(n){return t(n)?!0:(e.Lang.isString(n)&&(n=parseFloat(n)),e.Lang.isNumber(n)?!0:!1)}function f(t){return e.Lang.isString(t)&&(t=parseFloat(t)),e.Lang.isNumber(t)?t:undefined}function l(n){return t(n)?!0:e.Lang.isBoolean(n)?!0:[0,"0","false"].indexOf(n)>-1?!0:[1,"1","true"].indexOf(n)>-1?!0:!1}function c(e){return[!1,"0",0,"false"].indexOf(e)>-1?!1:[!0,"1",1,"true"].indexOf(e)>-1?!0:undefined}e.AttributeHelpers={validateString:n,coerceString:r,validateInteger:o,coerceInteger:u,validateFloat:a,coerceFloat:f,validateBoolean:l,coerceBoolean:c,validateDate:i,coerceDate:s}},"@VERSION@",{requires:[]});
YUI.add("flickr-favorites-add-updater",function(e,t){"use strict";function n(n,r){var i={};return i.photo_id=n.photoId,r.callAPI("flickr.favorites.add",i).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-favorites-add"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-favorites-remove-updater",function(e,t){"use strict";function n(n,r){var i={};return i.photo_id=n.photoId,i.user_id=n.userId,r.callAPI("flickr.favorites.remove",i).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-favorites-remove"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("photo-model-helper",function(e,t){var n=require("lib/flog")(t);e.PhotoModelHelper={updateEngagement:function(t,n){var r=[],i;return e.Lang.isObject(n,!0)&&"isFaved"in n&&(i=n.isFaved.newVal?"flickr-favorites-add":"flickr-favorites-remove",r.push(e.ModelUpdaters[i].run({photoId:t},this.appContext))),e.Promise.all(r)},toggleFave:function(e){var t=this.getValue(e,"faveCount"),n=this.getValue(e,"isFaved"),r=!n,i="photo-engagement-models",s=t+(r?1:-1);this.setValues(e,{isFaved:r,faveCount:s}),this.name!==i&&this.appContext.getModelRegistry(i).then(function(t){t.exists(e)&&t.toggleFave(e)})},addAsFave:function(e){var t=this.getValue(e,"faveCount"),n=this.getValue(e,"isFaved"),r="photo-engagement-models";return n||this.setValues(e,{isFaved:!0,faveCount:t+1}),this.name!==r&&this.appContext.getModelRegistry(r).then(function(t){t.exists(e)&&t.toggleFave(e)}),!n},getLargestSize:function(e,t){return this.getSizeToFit(e,{width:Number.MAX_VALUE,height:Number.MAX_VALUE},t)},getSizeToFit:function(t,r,i){i=i||{};var s=this,o,u=r.width,a=r.height,f=!!i.cropToFit,l=i.includeSquare,c=i.sizes||this.getValue(t,"sizes"),h=i.excludeSizes||["o"],p=i.includeSizes,d,v,m;if(typeof i.includeSizes=="undefined")try{p=Object.keys(c)}catch(g){n.warn("getSizeToFit with invalid sizes",{err:g,sizes:c})}return this._getSizeToFitMemo=this._getSizeToFitMemo||{},o=[t,u,a,f,h.sort().join(""),p.sort().join("")].join("_"),this._getSizeToFitMemo[o]||(e.Object.each(c,function(e,n){var r,i,s,o,c,g;if(e&&h.indexOf(n)===-1&&p.indexOf(n)>-1)if(l||!this.isSizeSquare(n)||this.isPhotoSquare(t)){r=parseInt(e.width,10),i=parseInt(e.height,10),f&&r>=u&&i>=a?s=!0:!f&&(r>=u||i>=a)&&(s=!0),s&&(d?(o=parseInt(d.height,10),i<o&&(d=e)):d=e);if(v){c=parseInt(v.width,10),g=parseInt(v.height,10);if(r>c||i>g)v=e}else v=e}m=d||v},this),this._getSizeToFitMemo[o]=m,this._getSizeToFitMemoTimer||(this._getSizeToFitMemoTimer=setTimeout(function(){delete s._getSizeToFitMemo,delete s._getSizeToFitMemoTimer},1e4))),e.clone(this._getSizeToFitMemo[o],!0)},getSizeIfExact:function(e,t){var n=this.getValue(e,"sizes"),r,i;return Object.keys(n).some(function(e){return e==="o"?!1:(i=n[e],t.height===i.height&&t.width===i.width?(r=i,!0):!1)}),r},isSizeSquare:function(e){var t={sq:"sq",q:"q"};return!!t[e]},isPhotoSquare:function(t){var n;return this._isPhotoSquareMemo=this._isPhotoSquareMemo||{},typeof this._isPhotoSquareMemo[t]!="undefined"?n=this._isPhotoSquareMemo[t]:(n=!0,e.Object.some(this.getValue(t,"sizes"),function(e,t){var r;if(e&&e.width&&e.height&&!this.isSizeSquare(t)){r=parseInt(e.width,10)/parseInt(e.height,10);if(r!==1)return n=!1,!0}},this),this._isPhotoSquareMemo[t]=n),n},getSizeForCanvas:function(e,t,n,r){r=r||1;var i=this.getSizeToFit(e,{width:t*r,height:n*r}),s,o;return s=Math.min(n/r,i.height),o=Math.min(t/r,i.width/i.height*s),s=Math.min(s,i.height/i.width*o),{width:Math.round(o),height:Math.round(s),url:i.url,pixelRatio:i.width/o}},attributes:{title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},mediaType:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:"photo"},license:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},isVideo:{readOnly:!0,derivedBy:["mediaType"],getter:function(e,t){var n=this.getValue(t,"mediaType");return n==="video"}},isOwner:{readOnly:!0,derivedBy:["owner"],getter:function(e,t){var n=this.getValue(t,"owner"),r=this.appContext.getViewer();return!!r.signedIn&&n.getValue("id")===r.nsid}},sizes:{},descendingSizes:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(e){var t,n,r=[];this._descendingSizesMemo=this._descendingSizesMemo||{};if(this._descendingSizesMemo[e])return this._descendingSizesMemo[e];t=this.getValue(e,"sizes");for(n in t)r.push(t[n]),r[r.length-1].key=n;return r.sort(function(e,t){return e.width<t.width?1:e.width===t.width?e.height<t.height?1:e.height===t.height?e.key==="o"?-1:1:-1:-1}),this._descendingSizesMemo[e]=r,r}},ascendingSizes:{readOnly:!0,derivedBy:["descendingSizes"],defaultFn:function(e){return this.getValue(e,"descendingSizes").reverse()}},aspectRatio:{readOnly:!0,derivedBy:["descendingSizes","rotation"],defaultFn:function(e){var t=this.getValue(e,"descendingSizes")[0];return t.key==="o"&&this.getValue(e,"rotation")%180!==0?t.height/t.width:t.width/t.height}},needsInterstitial:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},canPublicComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/"+e:undefined}},rotation:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},ownerNsid:{},isFaved:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},faveCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},commentCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},canFave:{readOnly:!0
,derivedBy:["is_owner"],getter:function(e,t){return!this.getValue(t,"isOwner")}}}}},"@VERSION@",{requires:["flickr-favorites-add-updater","flickr-favorites-remove-updater"]});
YUI.add("flickr-groups-join-creator",function(e,t){"use strict";function n(n,r){var i={};return i.group_id=n.groupModel.id,i.accept_rules=n.acceptRules,e.Promise.all([r.callAPI("flickr.groups.join",i)]).then(function(e){var t=e[0];if(t.stat==="ok")return n.groupModel.join(),n.groupModel},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-groups-join"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-groups-leave-deletor",function(e,t){"use strict";function n(n,r){var i={};return i.group_id=n.groupModel.id,i.delete_photos=n.deletePhotos,e.Promise.all([r.callAPI("flickr.groups.leave",i)]).then(function(e){var t=e[0];if(t.stat==="ok")return n.groupModel.leave(),n.groupModel},e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-groups-leave"]={run:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("group-info-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-groups-getInfo"].run(t,this.appContext)},join:function(t,n){return e.ModelCreators["flickr-groups-join"].run(t,n)},leave:function(t,n){return e.ModelDeletors["flickr-groups-leave"].run(t,n)}},join:function(e){var t=this.getValue(e,"group");return t&&t.setValue("isMember",!0),this},leave:function(e){var t=this.getValue(e,"group");return t&&(t.setValue("isAdmin",!1),t.setValue("isModerator",!1),t.setValue("isMember",!1),this.setValue(e,"hasPendingInvite",!1)),this},attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},secureDescription:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},rules:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},roles:{},secureRules:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},hasPendingInvite:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},discussionsLocked:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},privacy:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:1},restrictions:{},throttle:{},poolPreviewRowsVisibleCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 1}},coverPhotoAttribution:{},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-groups-getInfo-fetcher","flickr-groups-join-creator","flickr-groups-leave-deletor","attribute-helpers","group-models"]});
YUI.add("flickr-groups-getInfo-fetcher",function(e,t){"use strict";function n(t){var n={extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras()+", blast_user_info, date_last_viewed, has_pending_invite, coverphoto_attribution, is_locked",secure_image_embeds:1,lang:undefined};if(t.id)n.group_id=t.id;else{if(!t.pathAlias)throw new Error("[flickr-groups-getInfo-fetcher] `id` or `pathAlias` is required.");n.group_path_alias=t.pathAlias}return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a,f,l,c;return l=s.parseGroupModel(n.id,n.pathAlias,r.group),s.addOrUpdate(l),f={id:l.id,viewedPool:e.moment(r.group.viewedDates?r.group.viewedDates.pool:undefined),viewedDiscussions:e.moment(r.group.viewedDates?r.group.viewedDates.discussions:undefined),group:s.proxy(l.id)},u.addOrUpdate(f),l=s.proxy(l.id),c={id:l.id,blastMessage:r.group.blast?r.group.blast.content:"",blastMessageSecure:r.group.blast?r.group.secureBlast.content:"",blastUserId:r.group.blast?r.group.blast.userId:"",blastDateAdded:r.group.blast?e.moment(r.group.blast.dateBlastAdded,"X"):e.moment(),blastUserName:r.group.blast?r.group.blast.userName:"",blastPathAlias:r.group.blast?r.group.blast.userPathAlias:"",blastUserNSID:r.group.blast?r.group.blast.userNsid:"",blastRealName:r.group.blast?r.group.blast.realName:"",blastUserStatus:r.group.blast?r.group.blast.userStatus:""},o.addOrUpdate(c),a={id:r.group.id,pathAlias:r.group.pathAlias||n.pathAlias,description:r.group.description.content,secureDescription:r.group.secureDescription?r.group.secureDescription.content:"",rules:r.group.rules.content,roles:r.group.roles,secureRules:r.group.secureRules.content,restrictions:r.group.restrictions,throttle:r.group.throttle,poolPreviewRowsVisibleCount:r.group.pool_rows,group:l,discussionsLocked:r.group.isLocked==="1",hasPendingInvite:r.group.has_pending_invite,coverPhotoAttribution:r.group.coverphoto},i.addOrUpdate(a),i.proxy(a.id)}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.groups.getInfo",this._processParams(n),!0),r.getModelRegistry("group-info-models"),r.getModelRegistry("group-models"),r.getModelRegistry("group-blast-models"),r.getModelRegistry("group-activity-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-groups-getInfo"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["group-info-models","group-models"]});
YUI.add("group-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGroupModel:function(t,n,r){var i={id:r.id||t||r.nsid,pathAlias:r.pathAlias||n||r.pathalias,title:r.title,invitationOnly:r.invitationOnly,memberCount:r.memberCount,poolCount:r.photos,poolPreviewRowsVisibleCount:r.pool_rows,topicCount:r.topicCount==="string"?r.topicCount:undefined,pendingCount:r.pool_pending_count,memberPendingCount:r.member_pending_count,iconurls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.iconurls),isMember:r.is_member||r.member||r.isMember,isModerator:r.is_moderator||r.moderator||r.isModerator,isAdmin:r.is_admin||r.admin||r.isAdmin,eighteenplus:r.eighteenplus,coverPhotoUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.coverphotoUrl),latestPhotoActivity:e.moment(r.date_activity_detail?r.date_activity_detail.pool:undefined,"X"),latestDiscussionActivity:e.moment(r.date_activity_detail?r.date_activity_detail.discussions:undefined,"X"),showPoolToNonMembers:r.show_pool,showDiscussionToNonMembers:r.show_discussion,needsInterstitial:r.needs_interstitial},s;return typeof r.datecreate=="string"?s=r.datecreate:r.datecreate&&typeof r.datecreate.content=="string"&&(s=r.datecreate.content),s?(s+=" +0700",i.dateCreated=e.moment(s,"YYYY-MM-DD HH:mm:ss Z")):i.dateCreated=new e.moment,!i.title&&r.name&&(i.title=typeof r.name=="string"?r.name:r.name.content),!i.memberCount&&r.members&&(i.memberCount=typeof r.members!="string"?r.members.content:r.members),!i.poolCount&&r.poolCount&&(i.poolCount=typeof r.poolCount!="string"?r.poolCount.content:r.poolCount),i.topicCount||(r.topicCount?i.topicCount=typeof r.topicCount!="string"?r.topicCount.content:r.topicCount:i.topicCount=0),r.privacy&&(parseInt(r.privacy,10)?i.privacy=parseInt(r.privacy,10):r.privacy.content&&(i.privacy=r.privacy.content)),i},getLargestCoverPhotoSize:function(t,n){return e.PhotoModelHelper.getLargestSize(t,n)},attributes:{title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},isModerator:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},invitationOnly:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isMember:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isAdmin:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},memberCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},poolCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},friendlyPoolCount:{readOnly:!0,derivedBy:["poolCount"],getter:function(t,n){return e.Number.format(this.getValue(n,"poolCount"),{thousandsSeparator:","})}},pendingCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},memberPendingCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},topicCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},groupPoolAddURL:{readOnly:!0,derivedBy:["pathAlias"],defaultFn:function(e){return"/groups/"+this.getValue(e,"pathAlias")+"/pool/add/"}},dateCreated:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},latestPhotoActivity:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},latestDiscussionActivity:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},showPoolToNonMembers:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},showDiscussionToNonMembers:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},eighteenplus:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},needsInterstitial:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},privacy:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},iconurls:{},bestIconURL:{readOnly:!0,derivedBy:["iconurls"],defaultFn:function(t,n){var r=e.URLHelper.getGroupIconURL(this.getValue(t,"iconurls"
),n);return r?r:undefined}},mediumIconURL:{readOnly:!0,derivedBy:["iconurls"],defaultFn:function(t){var n=e.URLHelper.getGroupIconURL(this.getValue(t,"iconurls"),"medium");return n?n:undefined}},url:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return"/groups/"+(this.getValue(e,"pathAlias")||e)+"/"}},urlMembersPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"members"}},urlPoolPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"pool"}},urlDiscussionPage:{readOnly:!0,derivedBy:["group","url"],defaultFn:function(e){return this.getValue(e,"url")+"discuss"}},urlPendingMembersPage:{readOnly:!0,derivedBy:["id"],defaultFn:function(e){return"/groups_pending.gne?id="+e}},urlPendingPhotosPage:{readOnly:!0,derivedBy:["pathAlias"],defaultFn:function(e){return"/groups/"+this.getValue(e,"pathAlias")+"/admin/pending"}},coverPhotoUrls:{},latestGroupActivity:{readOnly:!0,derivedBy:["latestPhotoActivity","latestDiscussionActivity","dateCreated"],defaultFn:function(t){var n=this.getValue(t,"latestDiscussionActivity"),r=this.getValue(t,"latestPhotoActivity"),i=this.getValue(t,"dateCreated"),s=i;return n.isValid()&&(s=e.moment.min(s,n)),r.isValid()&&(s=e.moment.min(s,r)),s}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","api-helper","url-helper","moment","flickr-groups-getInfo-fetcher","attribute-helpers","photo-model-helper"]});
YUI.add("flickr-groups-recommendations-fetcher",function(e,t){"use strict";function n(e){return e.sample_photos_count=8,e}function r(t,n,r){var i=t[0].groups.group,s=t[1],o=t[2],u={},a=[],f="none";return e.each(i,function(e){var t;e.id=e.nsid,t=o.parseGroupModel(e),o.addOrUpdate(t),a.push(o.proxy(t.id))}),u.id=f,u.groups={perPage:n.per_page,page:n.page,pageContent:a,totalItems:t[0].groups.total},s.addOrUpdate(u),a}function i(r,i){var s=this,o=n({page:r.page||1,per_page:r.perPage||4});return e.Promise.all([i.callAPI("flickr.groups.recommendations",o,!0),i.getModelRegistry("group-recommended-list-models"),i.getModelRegistry("group-recommended-models")]).then(function(e){return s._processResponse(e,o,r)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-groups-recommendations"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["group-info-models","group-models"]});
YUI.add("group-recommended-list-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-groups-recommendations"].run(t,this.appContext)}},attributes:{groups:{isCollection:!0,pageFetch:{listFetcher:e.ModelFetchers["flickr-groups-recommendations"]}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-groups-recommendations-fetcher","attribute-helpers"]});
YUI.add("hermes-template-result-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" linked"},3:function(e,t,n,r,i){return" reboot-restyle"},5:function(e,t,n,r,i){var s;return'		<div class="coverphoto-gradient"></div>\n		<div class="cover" style="background-image:url('+e.escapeExpression((s=(s=n.coverPhotoUrl||(t!=null?t.coverPhotoUrl:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"coverPhotoUrl",hash:{},data:i}):s))+')"></div>\n'},7:function(e,t,n,r,i){var s;return'<a href="'+e.escapeExpression(e.lambda((s=t!=null?t.avatar:t)!=null?s.link:s,t))+'" data-track="groupCardOtherClick">'},9:function(e,t,n,r,i){var s;return' data-group-nsid="'+e.escapeExpression(e.lambda((s=t!=null?t.avatar:t)!=null?s.groupNsid:s,t))+'" '},11:function(e,t,n,r,i){var s;return' data-person-nsid="'+e.escapeExpression(e.lambda((s=t!=null?t.avatar:t)!=null?s.personNsid:s,t))+'" '},13:function(e,t,n,r,i){return"</a>"},15:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="subtitle">\n					'+((s=n["if"].call(o,t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n					"+((s=n.each.call(o,t!=null?t.subtitles:t,{name:"each",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				</div>\n"},16:function(e,t,n,r,i){return'<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>'},18:function(e,t,n,r,i){return"<span>"+e.escapeExpression(e.lambda(t,t))+"</span>"},20:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.subtitle:t,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:""},21:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return"					"+((s=n["if"].call(u,t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n					<div class="subtitle">'+e.escapeExpression((o=(o=n.subtitle||(t!=null?t.subtitle:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"subtitle",hash:{},data:i}):o))+"</div>\n"},23:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="links">\n					'+((s=n.each.call(o,t!=null?t.links:t,{name:"each",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n					"+((s=n["if"].call(o,t!=null?t.linksMetadata:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				</div>\n"},24:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return"<span>"+((s=n["if"].call(u,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(o=(o=n.text||(t!=null?t.text:t))!=null?o:n.helperMissing,typeof o==="function"?o.call(u,{name:"text",hash:{},data:i}):o))!=null?s:"")+((s=n["if"].call(u,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</span>"},25:function(e,t,n,r,i){var s;return'<a data-track="groupCardOtherClick"  href="'+e.escapeExpression((s=(s=n.url||(t!=null?t.url:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"url",hash:{},data:i}):s))+'">'},27:function(e,t,n,r,i){var s;return'<span class="links-metadata">'+e.escapeExpression((s=(s=n.linksMetadata||(t!=null?t.linksMetadata:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"linksMetadata",hash:{},data:i}):s))+"</span>"},29:function(e,t,n,r,i){var s;return'			<a href="'+e.escapeExpression((s=(s=n.link||(t!=null?t.link:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"link",hash:{},data:i}):s))+'" data-track="groupCardOtherClick" class="click-anywhere"></a>\n'},31:function(e,t,n,r,i){var s;return'		<div class="button-content">\n'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.cta:t)!=null?s.staticButton:s,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.program(35,i,0),data:i}))!=null?s:"")+"		</div>\n"},32:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'				<a class="butt join '+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.cta:t)!=null?s.hasJoined:s,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" href="'+u(o((s=(s=t!=null?t.cta:t)!=null?s.staticButton:s)!=null?s.url:s,t))+'">'+u(o((s=(s=t!=null?t.cta:t)!=null?s.staticButton:s)!=null?s.text:s,t))+"</a>\n"},33:function(e,t,n,r,i){return" has-joined "},35:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.cta:t)!=null?s.joinPlaceholderId:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.program(38,i,0),data:i}))!=null?s:""},36:function(e,t,n,r,i){var s;return'					<span id="'+e.escapeExpression(e.lambda((s=t!=null?t.cta:t)!=null?s.joinPlaceholderId:s,t))+'"></span>\n'},38:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.cta:t)!=null?s.followPlaceholderId:s,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.program(41,i,0),data:i}))!=null?s:""},39:function(e,t,n,r,i){var s;return'					<span id="'+e.escapeExpression(e.lambda((s=t!=null?t.cta:t)!=null?s.followPlaceholderId:s,t))+'"></span>\n'},41:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return"						<button"+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.avatar:t)!=null?s.personNsid:s,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+' class="'+u(o((s=t!=null?t.cta:t)!=null?s.type:s,t))+' mini not-follow-view">'+u(o((s=t!=null?t.cta:t)!=null?s.text:s,t))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=e.lambda,a=e.escapeExpression;return'<div class="result-card'+((s=n["if"].call(o,t!=null?t.link:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.globalNavRestyleFlipped:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(o,t!=null?t.coverPhotoUrl:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	<div class="sizer-cropper" title="'+a(u((s=t!=null?t.title:t)!=null?s.text:s,t))+'">\n		<div class="avatar-content">\n			'+((s=n["if"].call(o,(s=t!=null?t.avatar
:t)!=null?s.link:s,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				<div"+((s=n["if"].call(o,(s=t!=null?t.avatar:t)!=null?s.groupNsid:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=t!=null?t.avatar:t)!=null?s.personNsid:s,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+' class="'+a(u((s=t!=null?t.avatar:t)!=null?s.noMenu:s,t))+" avatar "+a(u((s=t!=null?t.avatar:t)!=null?s.type:s,t))+' medium" title="'+a(u((s=t!=null?t.avatar:t)!=null?s.title:s,t))+'" data-track="groupCardOtherClick" style="background-image: url('+a(u((s=t!=null?t.avatar:t)!=null?s.url:s,t))+');"></div>\n			'+((s=n["if"].call(o,(s=t!=null?t.avatar:t)!=null?s.link:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n		</div>\n		<div class="text-content">\n			<div data-track="groupCardOtherClick" class="title">'+a(u((s=t!=null?t.title:t)!=null?s.text:s,t))+"</div>\n"+((s=n["if"].call(o,t!=null?t.subtitles:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.subtitles:t,{name:"unless",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.links:t,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</div>\n"+((s=n["if"].call(o,t!=null?t.link:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n"+((s=n["if"].call(o,t!=null?t.cta:t,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/result-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-groups-recommended-group",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'			<a href="'+f((s=(s=n.link||(t!=null?t.link:t))!=null?s:u,typeof s===a?s.call(o,{name:"link",hash:{},data:i}):s))+'" data-track="recommendedGroupPhotoClick" style="background-image: url('+f((s=(s=n.url||(t!=null?t.url:t))!=null?s:u,typeof s===a?s.call(o,{name:"url",hash:{},data:i}):s))+');"></a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="recommended-group">\n'+((s=e.invokePartial(r["result-card"],t,{name:"result-card",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+'\n	<div class="group-pool-preview">\n'+((s=n.each.call(t!=null?t:{},t!=null?t.photos:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["result-card"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/groups-recommended-group",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-result-card"]});
YUI.add("hermes-template-groups-recommended-list-page",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"		<h5>"+e.escapeExpression((s=(s=n.subtitle||(t!=null?t.subtitle:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"subtitle",hash:{},data:i}):s))+"</h5>\n"},3:function(e,t,n,r,i){var s;return'		<div class="loading">\n'+((s=e.invokePartial(r["flickr-balls"],t,{name:"flickr-balls",data:i,indent:"			",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"		</div>\n"},5:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="recommended-groups clear-float">\n'+((s=n.each.call(o,t!=null?t.recommendedGroups:t,{name:"each",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		</div>\n\n		<div class="pagination">\n			<div class="loading" hidden="hidden">\n'+((s=e.invokePartial(r["flickr-balls"],t,{name:"flickr-balls",data:i,indent:"				",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+'			</div>\n\n			<p><button data-track="groupLoadMoreButtonClicked" class="butt next-page">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.VIEW_MORE_GROUPS"},data:i}))+"</button></p>\n		</div>\n"},6:function(e,t,n,r,i){var s;return(s=e.invokePartial(r["groups-recommended-group"],t,{name:"groups-recommended-group",data:i,indent:"				",helpers:n,partials:r,decorators:e.decorators}))!=null?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="featured-groups">\n'+((s=n.each.call(o,t!=null?t.subtitles:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+"</div>\n"},usePartial:!0,useData:!0}),r={};e.Array.each(["flickr-balls","groups-recommended-group","flickr-balls"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/groups-recommended-list-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls","hermes-template-groups-recommended-group","hermes-template-flickr-balls"]});
